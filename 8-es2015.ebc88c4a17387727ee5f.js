(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{S4wv:function(e,t,n){"use strict";n.r(t),n.d(t,"CourseModule",function(){return pt});var o=n("ofXK"),r=n("p3Fh"),i=n("tyNb"),c=n("Dh3D"),s=n("+0xr"),a=n("fXoL"),b=n("DxEH"),u=n("6WEx");function l(e,t){1&e&&(a.Ub(0,"th",15),a.Jc(1," No."),a.Tb())}function d(e,t){if(1&e&&(a.Ub(0,"td",16),a.Jc(1),a.Tb()),2&e){const e=t.$implicit;a.Bb(1),a.Lc(" ",e.id||"No ID"," ")}}function m(e,t){1&e&&(a.Ub(0,"th",15),a.Jc(1," Name"),a.Tb())}function h(e,t){if(1&e&&(a.Ub(0,"td",16),a.Jc(1),a.Tb()),2&e){const e=t.$implicit;a.Bb(1),a.Lc(" ",e.name||"No Name"," ")}}function p(e,t){1&e&&(a.Ub(0,"th",15),a.Jc(1," Course Status"),a.Tb())}function f(e,t){if(1&e&&(a.Ub(0,"td",16),a.Jc(1),a.Tb()),2&e){const e=t.$implicit;a.Bb(1),a.Lc(" ",e.status||"No Status"," ")}}function g(e,t){1&e&&(a.Ub(0,"th",15),a.Jc(1," Registration Status"),a.Tb())}function v(e,t){1&e&&(a.Sb(0),a.Jc(1,"Registered"),a.Rb())}function T(e,t){1&e&&a.Jc(0,"Not Registered")}function U(e,t){if(1&e&&(a.Ub(0,"td",16),a.Hc(1,v,2,0,"ng-container",17),a.Hc(2,T,1,0,"ng-template",null,18,a.Ic),a.Tb()),2&e){const e=t.$implicit,n=a.wc(3);a.Bb(1),a.oc("ngIf",e.is_registered)("ngIfElse",n)}}function I(e,t){1&e&&(a.Ub(0,"th",19),a.Jc(1," Actions"),a.Tb())}const k=function(e){return[e]};function y(e,t){if(1&e&&(a.Ub(0,"a",23),a.Jc(1,"Open"),a.Tb()),2&e){const e=a.ic().$implicit;a.oc("routerLink",a.sc(1,k,e.id))}}const S=function(e){return[e,"register"]};function B(e,t){if(1&e&&(a.Ub(0,"a",24),a.Jc(1,"Register"),a.Tb()),2&e){const e=a.ic().$implicit;a.oc("routerLink",a.sc(1,S,e.id))}}function C(e,t){if(1&e&&(a.Ub(0,"td",20),a.Hc(1,y,2,3,"a",21),a.Hc(2,B,2,3,"a",22),a.Tb()),2&e){const e=t.$implicit,n=a.ic();a.Bb(1),a.oc("ngIf",n.hasViewPermission(e.id)),a.Bb(1),a.oc("ngIf",!e.is_registered)}}function J(e,t){1&e&&a.Pb(0,"tr",25)}function w(e,t){1&e&&a.Pb(0,"tr",26)}let _=(()=>{class e{constructor(e,t,n){this.authenticationService=e,this.route=t,this.courseService=n,this.displayedColumns=["id","name","status","is_registered","actions"],this.courseList=new s.k,this.authenticationService.currentUser.subscribe(e=>this.user=e)}ngAfterViewInit(){this.courseService.getCourses().subscribe(e=>{this.allCourses=e,this.courseList=new s.k(e),this.courseList.sort=this.sort})}hasViewPermission(e){var t;return this.user.is_teacher||!!(null===(t=this.allCourses.find(t=>t.id===e))||void 0===t?void 0:t.is_registered)}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(b.a),a.Ob(i.a),a.Ob(u.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-course-list"]],viewQuery:function(e,t){if(1&e&&a.Nc(c.a,!0),2&e){let e;a.vc(e=a.fc())&&(t.sort=e.first)}},decls:22,vars:3,consts:[[1,"course-list-page"],[1,"mx-auto"],[1,"my-md-2"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"table","table-hover","hover-shadow",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","status"],["matColumnDef","is_registered"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","actions",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf","ngIfElse"],["notRegistered",""],["mat-header-cell",""],["mat-cell","",1,"actions"],["class","btn btn-primary mr-3",3,"routerLink",4,"ngIf"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[1,"btn","btn-primary","mr-3",3,"routerLink"],[1,"btn","btn-primary",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"h1",2),a.Jc(3,"Course List"),a.Tb(),a.Ub(4,"table",3),a.Sb(5,4),a.Hc(6,l,2,0,"th",5),a.Hc(7,d,2,1,"td",6),a.Rb(),a.Sb(8,7),a.Hc(9,m,2,0,"th",5),a.Hc(10,h,2,1,"td",6),a.Rb(),a.Sb(11,8),a.Hc(12,p,2,0,"th",5),a.Hc(13,f,2,1,"td",6),a.Rb(),a.Sb(14,9),a.Hc(15,g,2,0,"th",5),a.Hc(16,U,4,2,"td",6),a.Rb(),a.Sb(17,10),a.Hc(18,I,2,0,"th",11),a.Hc(19,C,3,2,"td",12),a.Rb(),a.Hc(20,J,1,0,"tr",13),a.Hc(21,w,1,0,"tr",14),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Bb(4),a.oc("dataSource",t.courseList),a.Bb(16),a.oc("matHeaderRowDef",t.displayedColumns),a.Bb(1),a.oc("matRowDefColumns",t.displayedColumns))},directives:[s.j,c.a,s.c,s.e,s.b,s.g,s.i,s.d,c.b,s.a,o.o,i.d,s.f,s.h],styles:[".hover-shadow[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.445,.05,.55,.95)}.hover-shadow[_ngcontent-%COMP%]:hover{box-shadow:0 .65rem .65rem rgba(0,0,0,.08)}"]}),e})();var E=n("3Pt+"),N=n("B/XX"),R=n("nPby"),H=n("5eHb"),O=n("xHqg"),D=n("kmnG"),P=n("qFsG"),x=n("bTqV");const q=["stepper"];function M(e,t){1&e&&a.Jc(0,"Identification")}function L(e,t){1&e&&a.Jc(0,"Confirm Identity")}function F(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Hc(1,L,1,0,"ng-template",7),a.Ub(2,"mat-form-field"),a.Ub(3,"mat-label"),a.Jc(4,"Student Number"),a.Tb(),a.Pb(5,"input",19),a.Tb(),a.Ub(6,"div"),a.Ub(7,"button",20),a.ec("click",function(){return a.yc(e),a.ic().reset()}),a.Jc(8,"Back"),a.Tb(),a.Ub(9,"button",10),a.ec("click",function(){return a.yc(e),a.ic().registerStepSubmit()}),a.Jc(10,"Submit"),a.Tb(),a.Tb(),a.Rb()}}function A(e,t){1&e&&a.Jc(0,"Confirm Identity")}function j(e,t){if(1&e){const e=a.Vb();a.Hc(0,A,1,0,"ng-template",7),a.Ub(1,"mat-form-field"),a.Ub(2,"mat-label"),a.Jc(3,"Please confirm the following details."),a.Tb(),a.Pb(4,"input",21),a.Tb(),a.Ub(5,"div"),a.Ub(6,"button",20),a.ec("click",function(){return a.yc(e),a.ic().reset()}),a.Jc(7,"Back"),a.Tb(),a.Ub(8,"button",10),a.ec("click",function(){return a.yc(e),a.ic().registerStepSubmit()}),a.Jc(9,"Confirm"),a.Tb(),a.Tb()}if(2&e){const e=a.ic();a.Bb(4),a.oc("value",e.serverGuessedName)}}function K(e,t){1&e&&a.Jc(0,"Verification")}function $(e,t){if(1&e&&(a.Ub(0,"p"),a.Jc(1),a.Tb()),2&e){const e=a.ic();a.Bb(1),a.Lc("Attempts Remaining: ",e.attemptsRemaining,"")}}function G(e,t){1&e&&a.Jc(0,"Done")}const Y=function(e){return["/course",e]};let V=(()=>{class e{constructor(e,t,n,o){this.route=e,this.formBuilder=t,this.courseService=n,this.toastr=o,this.courseId=this.route.snapshot.params.courseId,this.needsStudentNumber=!1,this.verification=!1,this.completed=!1,this.editable=!1}ngOnInit(){this.nameForm=this.formBuilder.group({nameControl:["",E.y.required]}),this.confirmNameForm=this.formBuilder.group({confirmNameControl:[""]}),this.studentNumberForm=this.formBuilder.group({studentNumberControl:["",E.y.required]}),this.verifyForm=this.formBuilder.group({verifyControl:["",E.y.required]}),this.getRegistrationStatus()}getRegistrationStatus(){this.courseService.getCourseRegistrationStatus(this.courseId).subscribe(e=>{e.message&&this.toastr.error(e.message),this.initialStage(e.status)})}initialStage(e){this.completed=e===R.a.REGISTERED,this.verification=e===R.a.AWAIT_VERIFICATION,this.selectedIndex=e===R.a.REGISTERED?3:e===R.a.AWAIT_VERIFICATION?2:0}setRegistrationStage(e){this.serverGuessedName=null==e?void 0:e.guessed_name,this.attemptsRemaining=null==e?void 0:e.attempts_remaining,e.success?this.nextStep():0===this.stepper.selectedIndex&&(this.needsStudentNumber=!0,this.nextStep())}registerStepSubmit(){const e=this.retrieveFormData();this.needsStudentNumber=!1,(e.name||e.student_number)&&this.courseService.register(this.courseId,e).subscribe(e=>{e.bad_request?this.sendErrorMessage():this.setRegistrationStage(e)})}verifyStepSubmit(){const e=this.retrieveFormData();e.code&&this.courseService.registerVerify(this.courseId,e).subscribe(e=>{e.bad_request?this.sendErrorMessage():this.setRegistrationStage(e)})}retrieveFormData(){return{name:this.nameForm.get("nameControl").value||null,confirmed_name:this.serverGuessedName||null,student_number:this.studentNumberForm.get("studentNumberControl").value||null,code:this.verifyForm.get("verifyControl").value||null}}nextStep(){this.stepper.selected.completed=!0,this.stepper.next()}sendErrorMessage(){this.toastr.error("Something went wrong. Check that your inputted values are accurate and try again.")}reset(){this.serverGuessedName=null,this.stepper.reset()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(i.a),a.Ob(E.f),a.Ob(u.a),a.Ob(H.b))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-register"]],viewQuery:function(e,t){if(1&e&&a.Nc(q,!0),2&e){let e;a.vc(e=a.fc())&&(t.stepper=e.first)}},features:[a.Ab([{provide:N.h,useValue:{displayDefaultIndicatorType:!1,showError:!0}}])],decls:40,vars:21,consts:[[1,"container"],[1,"my-5"],["role","alert",1,"alert","alert-info"],["linear","",1,"border-success",3,"selectedIndex"],["stepper",""],["errorMessage","Name is required",3,"stepControl","editable","completed"],[3,"formGroup"],["matStepLabel",""],[1,"w-50"],["matInput","","placeholder","Ex. John Doe","formControlName","nameControl","required",""],["mat-button","",1,"btn","btn-success",3,"click"],["errorMessage","Student Number is required",3,"stepControl","editable","completed"],[4,"ngIf","ngIfElse"],["confirmNameOnly",""],["errorMessage","Verification is required",3,"stepControl","editable","completed"],["matInput","","placeholder","Ex. 1234","formControlName","verifyControl","required",""],[4,"ngIf"],[3,"editable","completed"],["mat-button","",1,"btn","btn-primary",3,"routerLink"],["type","number","matInput","","formControlName","studentNumberControl","placeholder","Ex. 12345678","required",""],["mat-button","",1,"btn","btn-danger",3,"click"],["matInput","","placeholder","Ex. John Doe","formControlName","confirmNameControl","disabled","",3,"value"]],template:function(e,t){if(1&e&&(a.Ub(0,"div",0),a.Ub(1,"h1",1),a.Jc(2,"Course Registration"),a.Tb(),a.Ub(3,"div",2),a.Jc(4," Note: You can only register in courses that you are also registered in on Canvas! "),a.Tb(),a.Ub(5,"mat-horizontal-stepper",3,4),a.Ub(7,"mat-step",5),a.Ub(8,"form",6),a.Hc(9,M,1,0,"ng-template",7),a.Ub(10,"mat-form-field",8),a.Ub(11,"mat-label"),a.Jc(12,"Your full name as it appears on Canvas"),a.Tb(),a.Pb(13,"input",9),a.Tb(),a.Ub(14,"div"),a.Ub(15,"button",10),a.ec("click",function(){return t.registerStepSubmit()}),a.Jc(16,"Submit"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(17,"mat-step",11),a.Ub(18,"form",6),a.Hc(19,F,11,0,"ng-container",12),a.Hc(20,j,10,1,"ng-template",null,13,a.Ic),a.Tb(),a.Tb(),a.Ub(22,"mat-step",14),a.Ub(23,"form",6),a.Hc(24,K,1,0,"ng-template",7),a.Ub(25,"mat-form-field"),a.Ub(26,"mat-label"),a.Jc(27,"Verification Code"),a.Tb(),a.Pb(28,"input",15),a.Tb(),a.Hc(29,$,2,1,"p",16),a.Ub(30,"div"),a.Ub(31,"button",10),a.ec("click",function(){return t.verifyStepSubmit()}),a.Jc(32,"Submit"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(33,"mat-step",17),a.Hc(34,G,1,0,"ng-template",7),a.Ub(35,"p"),a.Jc(36,"Registration Complete."),a.Tb(),a.Ub(37,"div"),a.Ub(38,"a",18),a.Jc(39,"Open Course"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e){const e=a.wc(21);a.Bb(5),a.oc("selectedIndex",t.selectedIndex),a.Bb(2),a.oc("stepControl",t.nameForm)("editable",t.editable)("completed",t.completed||t.verification),a.Bb(1),a.oc("formGroup",t.nameForm),a.Bb(9),a.oc("stepControl",t.needsStudentNumber?t.studentNumberForm:t.confirmNameForm)("editable",t.editable)("completed",t.completed||t.verification),a.Bb(1),a.oc("formGroup",t.needsStudentNumber?t.studentNumberForm:t.confirmNameForm),a.Bb(1),a.oc("ngIf",t.needsStudentNumber)("ngIfElse",e),a.Bb(3),a.oc("stepControl",t.verifyForm)("editable",t.editable)("completed",t.completed),a.Bb(1),a.oc("formGroup",t.verifyForm),a.Bb(6),a.oc("ngIf",t.attemptsRemaining),a.Bb(4),a.oc("editable",t.editable)("completed",t.completed),a.Bb(5),a.oc("routerLink",a.sc(19,Y,t.courseId))}},directives:[O.a,O.b,E.A,E.p,E.i,O.c,D.b,D.e,P.b,E.c,E.o,E.h,E.w,x.b,o.o,x.a,i.d,E.t],styles:[""]}),e})();var Q=n("cp0P"),z=n("tO5q"),W=n("sG26");function X(e,t){if(1&e&&(a.Ub(0,"h2",7),a.Jc(1),a.Tb()),2&e){const e=a.ic(2);a.Bb(1),a.Lc("",e.event.name," Questions")}}function Z(e,t){1&e&&(a.Sb(0),a.Ub(1,"th",4),a.Jc(2,"Num\xa0Attempts"),a.Tb(),a.Rb())}function ee(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"td"),a.Jc(2),a.Tb(),a.Rb()),2&e){const e=a.ic().$implicit;a.Bb(2),a.Mc(" ",e.num_attempts," / ",e.question.max_submission_allowed," ")}}const te=function(e,t,n){return["/course",e,"event",t,"problem",n]};function ne(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"a",10),a.Jc(2,"Open"),a.Tb(),a.Rb()),2&e){const e=a.ic().$implicit,t=a.ic(3);a.Bb(1),a.oc("routerLink",a.uc(1,te,t.courseId,t.eventId,e.question.id))}}const oe=function(e,t){return["/course",e,"problem",t]};function re(e,t){if(1&e&&(a.Ub(0,"a",10),a.Jc(1,"Open"),a.Tb()),2&e){const e=a.ic().$implicit,t=a.ic(3);a.oc("routerLink",a.tc(1,oe,t.courseId,e.question.id))}}const ie=function(e){return["/problem",e,"edit"]};function ce(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"a",11),a.Jc(2,"Edit"),a.Tb(),a.Rb()),2&e){const e=a.ic().$implicit;a.Bb(1),a.oc("routerLink",a.sc(1,ie,e.question.id))}}function se(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"tr"),a.Ub(2,"td"),a.Jc(3),a.Tb(),a.Ub(4,"td"),a.Jc(5),a.Tb(),a.Ub(6,"td"),a.Jc(7),a.Tb(),a.Ub(8,"td"),a.Jc(9),a.Tb(),a.Ub(10,"td"),a.Jc(11),a.Tb(),a.Hc(12,ee,3,2,"ng-container",0),a.Ub(13,"td"),a.Hc(14,ne,3,5,"ng-container",5),a.Hc(15,re,2,4,"ng-template",null,9,a.Ic),a.Hc(17,ce,3,3,"ng-container",0),a.Tb(),a.Tb(),a.Rb()),2&e){const e=t.$implicit,n=a.wc(16),o=a.ic(3);a.Bb(1),a.Cb("class",o.highlight(o.getStatus(e))),a.Bb(2),a.Kc(e.question.parent_category_name||"No Category"),a.Bb(2),a.Kc(e.question.category_name||"No Sub-Category"),a.Bb(2),a.Kc(e.question.type_name||"No Type"),a.Bb(2),a.Kc(e.formatted_current_tokens_received||"No Tokens"),a.Bb(2),a.Kc(o.getStatus(e)||"No Status"),a.Bb(1),a.oc("ngIf",o.eventId),a.Bb(2),a.oc("ngIf",o.eventId)("ngIfElse",n),a.Bb(3),a.oc("ngIf",o.user.is_teacher)}}function ae(e,t){if(1&e&&(a.Sb(0),a.Hc(1,se,18,10,"ng-container",8),a.Rb()),2&e){const e=a.ic(2);a.Bb(1),a.oc("ngForOf",e.uqjs)}}function be(e,t){1&e&&(a.Ub(0,"p",15),a.Jc(1," There aren't currently any questions in this event. "),a.Tb())}function ue(e,t){1&e&&(a.Ub(0,"p",15),a.Jc(1," There aren't currently any questions in this course. "),a.Tb())}function le(e,t){if(1&e&&(a.Ub(0,"tr"),a.Ub(1,"td",12),a.Hc(2,be,2,0,"p",13),a.Hc(3,ue,2,0,"ng-template",null,14,a.Ic),a.Tb(),a.Tb()),2&e){const e=a.wc(4),t=a.ic(2);a.Bb(1),a.Cb("colspan",t.eventId?7:6),a.Bb(1),a.oc("ngIf",t.eventId)("ngIfElse",e)}}function de(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"div"),a.Hc(2,X,2,1,"h2",1),a.Ub(3,"table",2),a.Ub(4,"thead",3),a.Ub(5,"tr"),a.Ub(6,"th",4),a.Jc(7,"Category"),a.Tb(),a.Ub(8,"th",4),a.Jc(9,"Sub\xa0Category"),a.Tb(),a.Ub(10,"th",4),a.Jc(11,"Format"),a.Tb(),a.Ub(12,"th",4),a.Jc(13,"Tokens Earned"),a.Tb(),a.Ub(14,"th",4),a.Jc(15,"Status"),a.Tb(),a.Hc(16,Z,3,0,"ng-container",0),a.Ub(17,"th",4),a.Jc(18,"Action"),a.Tb(),a.Tb(),a.Tb(),a.Ub(19,"tbody"),a.Hc(20,ae,2,1,"ng-container",5),a.Hc(21,le,5,3,"ng-template",null,6,a.Ic),a.Tb(),a.Tb(),a.Tb(),a.Rb()),2&e){const e=a.wc(22),t=a.ic();a.Bb(1),a.Gb("container",t.eventId),a.Bb(1),a.oc("ngIf",t.eventId),a.Bb(14),a.oc("ngIf",t.eventId),a.Bb(4),a.oc("ngIf",t.uqjs.length)("ngIfElse",e)}}let me=(()=>{class e{constructor(e,t,n,o,r,i){this.authenticationService=e,this.router=t,this.route=n,this.uqjService=o,this.courseEventService=r,this.courseService=i,this.authenticationService.currentUser.subscribe(e=>this.user=e)}ngOnInit(){this.courseId=+this.route.snapshot.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(e=>{e.success?Object(Q.a)({event:this.courseEventService.getCourseEvent(this.eventId),uqjs:this.uqjService.getUQJs({filters:{question_event:this.eventId}})}).subscribe(e=>{this.event=e.event,this.uqjs=e.uqjs.results}):this.router.navigate(["course/view",this.courseId]).then()})}getStatus(e){return e.question.event&&e.question.is_exam?e.question.is_exam&&e.num_attempts>0?"Submitted":e.question.is_exam?"Not submitted":void 0:e.status}highlight(e){return 0===e.localeCompare("Solved")?"highlight-success":0===e.localeCompare("Partially Solved")?"highlight-warning":0===e.localeCompare("Wrong")?"highlight-danger":""}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(b.a),a.Ob(i.b),a.Ob(i.a),a.Ob(z.a),a.Ob(W.a),a.Ob(u.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-course-question-snippet"]],inputs:{questions:"questions",uqjs:"uqjs"},decls:1,vars:1,consts:[[4,"ngIf"],["class","mb-3 mt-5",4,"ngIf"],["data-toggle","table",1,"table","table-hover","mt-3"],[1,"thead-light","text-dark"],["scope","col"],[4,"ngIf","ngIfElse"],["tableEmpty",""],[1,"mb-3","mt-5"],[4,"ngFor","ngForOf"],["noEvent",""],[1,"btn","btn-primary","mr-3",3,"routerLink"],[1,"btn","btn-warning","mr-3",3,"routerLink"],[1,"bg-info"],["class","text-center text-light m-0",4,"ngIf","ngIfElse"],["inCourse",""],[1,"text-center","text-light","m-0"]],template:function(e,t){1&e&&a.Hc(0,de,23,6,"ng-container",0),2&e&&a.oc("ngIf",t.uqjs)},directives:[o.o,o.n,i.d],styles:[".highlight-success[_ngcontent-%COMP%]{background-color:rgba(32,201,151,.3)}.highlight-success[_ngcontent-%COMP%]:hover{background-color:rgba(32,201,151,.6)}.highlight-warning[_ngcontent-%COMP%]{background-color:rgba(255,166,61,.3)}.highlight-warning[_ngcontent-%COMP%]:hover{background-color:rgba(255,166,61,.6)}.highlight-danger[_ngcontent-%COMP%]{background-color:rgba(255,69,87,.3)}.highlight-danger[_ngcontent-%COMP%]:hover{background-color:rgba(255,69,87,.6)}"]}),e})();const he=function(e){return["/course",e,"new-event"]};function pe(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"a",6),a.Jc(2,"Add an Event"),a.Tb(),a.Ub(3,"a",7),a.Jc(4,"Import an Event"),a.Tb(),a.Rb()),2&e){const e=a.ic();a.Bb(1),a.oc("routerLink",a.sc(1,he,e.courseId))}}function fe(e,t){1&e&&(a.Ub(0,"td"),a.Jc(1,"Not Available Yet"),a.Tb())}function ge(e,t){if(1&e&&(a.Ub(0,"td"),a.Jc(1),a.jc(2,"number"),a.Tb()),2&e){const e=a.ic().$implicit;a.Bb(1),a.Lc("",a.lc(2,1,e.total_event_grade,"1.0-1"),"%")}}const ve=function(e,t){return["/course",e,"event",t]};function Te(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"a",13),a.Jc(2),a.Tb(),a.Rb()),2&e){const e=a.ic().$implicit,t=a.ic(2);a.Bb(1),a.oc("routerLink",a.tc(2,ve,t.courseId,e.id)),a.Bb(1),a.Kc(t.getEventButtonText(e))}}function Ue(e,t){if(1&e&&(a.Ub(0,"a",14),a.Jc(1),a.Tb()),2&e){const e=a.ic().$implicit,t=a.ic(2);a.Bb(1),a.Kc(t.getEventButtonText(e))}}const Ie=function(e,t){return["/course",e,"new-event",t]};function ke(e,t){if(1&e&&(a.Ub(0,"a",15),a.Jc(1,"Edit"),a.Tb()),2&e){const e=a.ic().$implicit,t=a.ic(2);a.oc("routerLink",a.tc(1,Ie,t.courseId,e.id))}}function ye(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"tr"),a.Ub(2,"td"),a.Jc(3),a.Tb(),a.Ub(4,"td"),a.Jc(5),a.jc(6,"date"),a.Tb(),a.Ub(7,"td"),a.Jc(8),a.jc(9,"date"),a.Tb(),a.Hc(10,fe,2,0,"td",4),a.Hc(11,ge,3,4,"ng-template",null,9,a.Ic),a.Ub(13,"td"),a.Ub(14,"div",10),a.Hc(15,Te,3,5,"ng-container",4),a.Hc(16,Ue,2,1,"ng-template",null,11,a.Ic),a.Hc(18,ke,2,4,"a",12),a.Tb(),a.Tb(),a.Tb(),a.Rb()),2&e){const e=t.$implicit,n=a.wc(12),o=a.wc(17),r=a.ic(2);a.Bb(3),a.Kc(e.name||"N/A"),a.Bb(2),a.Kc(a.lc(6,8,e.start_date,"LLL. dd, YYYY, hh:MM a")),a.Bb(3),a.Kc(a.lc(9,11,e.end_date,"LLL. dd, YYYY, hh:MM a")),a.Bb(2),a.oc("ngIf",r.isExamAndOpen(e))("ngIfElse",n),a.Bb(5),a.oc("ngIf",e.is_allowed_to_open||(null==r.user?null:r.user.is_teacher))("ngIfElse",o),a.Bb(3),a.oc("ngIf",e.has_edit_permission)}}function Se(e,t){if(1&e&&(a.Sb(0),a.Hc(1,ye,19,14,"ng-container",8),a.Rb()),2&e){const e=a.ic();a.Bb(1),a.oc("ngForOf",e.events)}}function Be(e,t){1&e&&(a.Ub(0,"tr"),a.Ub(1,"td",16),a.Ub(2,"p",17),a.Jc(3,"There are currently no events in this course."),a.Tb(),a.Tb(),a.Tb())}let Ce=(()=>{class e{constructor(e,t){this.authenticationService=e,this.courseEventService=t}ngOnInit(){this.authenticationService.currentUser.subscribe(e=>this.user=e),this.courseEventService.getEventTypes().subscribe(e=>{this.eventTypes=e,this.eventTypesMap=new Map(this.eventTypes.map(([e,t])=>[e,t]))})}getEventButtonText(e){if(this.eventTypes)return(this.user.is_teacher?"Open ":"Do ")+this.eventTypesMap.get(e.type)}isExamAndOpen(e){return e.is_open&&e.is_exam}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(b.a),a.Ob(W.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-course-events-snippet"]],inputs:{events:"events",courseId:"courseId"},decls:19,vars:3,consts:[[4,"ngIf"],["data-toggle","table",1,"table","table-hover","mt-1"],[1,"thead-light","text-dark"],["scope","col"],[4,"ngIf","ngIfElse"],["tableEmpty",""],[1,"btn","btn-primary","my-2","mr-3",3,"routerLink"],["href","#",1,"btn","btn-primary","my-2"],[4,"ngFor","ngForOf"],["totalEventGrade",""],[1,"btn-container"],["notAllowedOpen",""],["class","btn btn-primary edit-btn",3,"routerLink",4,"ngIf"],[1,"btn","btn-primary","mr-3",3,"routerLink"],["href","#",1,"btn","btn-outline-info","open-btn","mr-3","disabled"],[1,"btn","btn-primary","edit-btn",3,"routerLink"],["colspan","6",1,"bg-info"],[1,"text-center","text-light","m-0"]],template:function(e,t){if(1&e&&(a.Hc(0,pe,5,3,"ng-container",0),a.Pb(1,"hr"),a.Ub(2,"table",1),a.Ub(3,"thead",2),a.Ub(4,"tr"),a.Ub(5,"th",3),a.Jc(6,"Name"),a.Tb(),a.Ub(7,"th",3),a.Jc(8,"Start\xa0Date"),a.Tb(),a.Ub(9,"th",3),a.Jc(10,"End\xa0Date"),a.Tb(),a.Ub(11,"th",3),a.Jc(12,"Grade"),a.Tb(),a.Ub(13,"th",3),a.Jc(14,"Actions"),a.Tb(),a.Tb(),a.Tb(),a.Ub(15,"tbody"),a.Hc(16,Se,2,1,"ng-container",4),a.Hc(17,Be,4,0,"ng-template",null,5,a.Ic),a.Tb(),a.Tb()),2&e){const e=a.wc(18);a.oc("ngIf",null==t.user?null:t.user.is_teacher),a.Bb(16),a.oc("ngIf",t.events)("ngIfElse",e)}},directives:[o.o,i.d,o.n],pipes:[o.e,o.f],styles:[""]}),e})();var Je=n("wHSu"),we=n("tk/3"),_e=n("JIr8"),Ee=n("RJTb");let Ne=(()=>{class e{constructor(e,t){this.http=e,this.apiService=t}useTokens(e,t){const n=new we.d({"Content-Type":"application/json"}),o=this.apiService.getURL("token-use","use",t);return this.http.post(o,e,{headers:n}).pipe(Object(_e.a)(this.apiService.handleError("Error occurred while attempting to use tokens",{success:!1,bad_request:!0})))}}return e.\u0275fac=function(t){return new(t||e)(a.bc(we.b),a.bc(Ee.a))},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Re=n("6NWb");function He(e,t){1&e&&(a.Sb(0),a.Ub(1,"h3",14),a.Jc(2,"Warning: You are logged in as a teacher! Token uses will not do anything for you!"),a.Tb(),a.Rb())}const Oe=function(){return{standalone:!0}};function De(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Ub(1,"tr"),a.Ub(2,"td"),a.Jc(3),a.Tb(),a.Ub(4,"td",16),a.Jc(5),a.Tb(),a.Ub(6,"td"),a.Jc(7),a.Tb(),a.Ub(8,"td"),a.Jc(9),a.Tb(),a.Ub(10,"td"),a.Ub(11,"form",17),a.Ub(12,"button",18),a.ec("click",function(){a.yc(e);const n=t.$implicit;return a.ic(2).useToken(n,-1)}),a.Pb(13,"fa-icon",19),a.Tb(),a.Ub(14,"label",20),a.Jc(15),a.Tb(),a.Ub(16,"input",21),a.ec("ngModelChange",function(e){return t.$implicit.num_used=e})("ngModelChange",function(){return a.yc(e),a.ic(2).calculateCurrentTotal()}),a.Tb(),a.Ub(17,"button",22),a.ec("click",function(){a.yc(e);const n=t.$implicit;return a.ic(2).useToken(n,1)}),a.Pb(18,"fa-icon",23),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Rb()}if(2&e){const e=t.$implicit,n=a.ic(2);a.Bb(3),a.Kc(e.option.assignment_name||"No Name"),a.Bb(1),a.qc("id","req_tokens_",e.option.id,""),a.Bb(1),a.Kc(e.option.tokens_required||"No Value"),a.Bb(2),a.Kc(e.option.points_given||"No Points"),a.Bb(2),a.Kc(e.option.maximum_number_of_use||"No Value"),a.Bb(4),a.oc("icon",n.faMinus),a.Bb(1),a.Cb("for","tokenUseAction"+e.option.id),a.Bb(1),a.Lc("Number of token use option ",e.option.id," to use"),a.Bb(1),a.oc("ngModel",e.num_used)("ngModelOptions",a.rc(13,Oe)),a.Cb("id","tokenUseAction"+e.option.id)("max",e.option.maximum_number_of_use),a.Bb(2),a.oc("icon",n.faPlus)}}function Pe(e,t){if(1&e&&(a.Sb(0),a.Hc(1,De,19,14,"ng-container",15),a.Rb()),2&e){const e=a.ic();a.Bb(1),a.oc("ngForOf",e.courseReg.token_uses)}}function xe(e,t){1&e&&(a.Ub(0,"tr"),a.Ub(1,"td",24),a.Ub(2,"p",25),a.Jc(3," There are currently no options for token use in this course. "),a.Tb(),a.Tb(),a.Tb())}let qe=(()=>{class e{constructor(e,t,n,o){this.tokenUseService=e,this.route=t,this.authenticationService=n,this.toastr=o,this.tokenUses={},this.faMinus=Je.d,this.faPlus=Je.f,this.authenticationService.currentUser.subscribe(e=>this.user=e)}ngOnInit(){this.courseReg.token_uses.forEach(e=>{this.tokenUses[e.option.id]=e}),this.calculateCurrentTotal()}useToken(e,t){e.num_used+=t,this.calculateCurrentTotal()}calculateCurrentTotal(){this.remainingTokens=this.courseReg.total_tokens_received;for(const e in this.tokenUses)this.remainingTokens-=this.tokenUses[e].num_used*this.tokenUses[e].option.tokens_required;this.invalid=this.remainingTokens<0}confirmChanges(){const e=this.route.snapshot.params.courseId,t={};for(const n in this.tokenUses)t[n]=this.tokenUses[n].num_used;this.tokenUseService.useTokens(t,e).subscribe(()=>{this.toastr.success("Token uses saved!.")})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(Ne),a.Ob(i.a),a.Ob(b.a),a.Ob(H.b))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-token-use-snippet"]],inputs:{courseReg:"courseReg"},decls:33,vars:16,consts:[[4,"ngIf"],[1,"card","border-secondary",2,"width","18rem"],[1,"card-body"],[1,"card-text"],["id","available_tokens"],["id","remaining_tokens_text",1,"card-text"],["id","remaining_tokens"],["method","post",1,"mt-3"],["data-toggle","table",1,"table","table-hover"],[1,"thead-light","text-dark"],["scope","col"],[4,"ngIf","ngIfElse"],["tableEmpty",""],["id","submit_button",1,"my-1","btn","btn-primary",3,"disabled","click"],[1,"card-text","red-text"],[4,"ngFor","ngForOf"],[3,"id"],[1,"form-inline"],[1,"btn","btn-danger","action-icon",3,"click"],[1,"fa","button-icon","fa-minus",3,"icon"],[1,"sr-only"],["type","number","min","0",1,"form-control","input-sm","mx-sm-2","token-input","no-spin-button",3,"ngModel","ngModelOptions","ngModelChange"],[1,"btn","btn-success","action-icon",3,"click"],[1,"fa","button-icon","fa-plus",3,"icon"],["colspan","5",1,"bg-info"],[1,"text-center","text-light","m-0"]],template:function(e,t){if(1&e&&(a.Hc(0,He,3,0,"ng-container",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"p",3),a.Jc(4,"Available Tokens: "),a.Ub(5,"span",4),a.Jc(6),a.jc(7,"number"),a.Tb(),a.Tb(),a.Ub(8,"p",5),a.Jc(9," Remaining Tokens:"),a.Ub(10,"span",6),a.Jc(11),a.jc(12,"number"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(13,"form",7),a.Ub(14,"table",8),a.Ub(15,"thead",9),a.Ub(16,"tr"),a.Ub(17,"th",10),a.Jc(18,"Assignment\xa0Name"),a.Tb(),a.Ub(19,"th",10),a.Jc(20,"Tokens\xa0Required"),a.Tb(),a.Ub(21,"th",10),a.Jc(22,"Extra\xa0Grade\xa0Given"),a.Tb(),a.Ub(23,"th",10),a.Jc(24,"Max\xa0Use"),a.Tb(),a.Ub(25,"th",10),a.Jc(26,"Actions"),a.Tb(),a.Tb(),a.Tb(),a.Ub(27,"tbody"),a.Hc(28,Pe,2,1,"ng-container",11),a.Hc(29,xe,4,0,"ng-template",null,12,a.Ic),a.Tb(),a.Tb(),a.Ub(31,"button",13),a.ec("click",function(){return t.confirmChanges()}),a.Jc(32,"Confirm Changes "),a.Tb(),a.Tb()),2&e){const e=a.wc(30);a.oc("ngIf",null==t.user?null:t.user.is_teacher),a.Bb(6),a.Kc(a.lc(7,10,t.courseReg.total_tokens_received,"1.0-1")),a.Bb(2),a.Gb("text-danger",t.invalid)("font-weight-bold",t.invalid),a.Bb(3),a.Kc(a.lc(12,13,t.remainingTokens,"1.0-1")),a.Bb(17),a.oc("ngIf",t.courseReg.token_uses)("ngIfElse",e),a.Bb(3),a.oc("disabled",t.invalid)}},directives:[o.o,E.A,E.p,E.q,o.n,Re.a,E.t,E.c,E.o,E.r],pipes:[o.f],styles:[".action-icon[_ngcontent-%COMP%]{line-height:1.25rem;display:inline-block;font-size:1.25rem;text-align:center;padding:.55rem;border-radius:5px}button[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{width:2rem;height:2rem}.token-input[_ngcontent-%COMP%]{width:5rem}"]}),e})();function Me(e,t){1&e&&(a.Ub(0,"th",7),a.Jc(1," Name"),a.Tb())}function Le(e,t){if(1&e&&(a.Ub(0,"td",8),a.Jc(1),a.Tb()),2&e){const e=t.$implicit;a.Bb(1),a.Lc(" ",e.name||"Anonymous User"," ")}}function Fe(e,t){1&e&&(a.Ub(0,"th",7),a.Jc(1," Token"),a.Tb())}function Ae(e,t){if(1&e&&(a.Ub(0,"td",8),a.Jc(1),a.Tb()),2&e){const e=t.$implicit;a.Bb(1),a.Lc(" ",e.token||"No Tokens"," ")}}function je(e,t){1&e&&a.Pb(0,"tr",9)}function Ke(e,t){1&e&&a.Pb(0,"tr",10)}let $e=(()=>{class e{constructor(){this.displayedColumns=["name","token"],this.leaderBoard=[{name:"Anonymous User",token:null}]}ngOnInit(){this.leaderBoardData=new s.k}ngAfterViewInit(){this.leaderBoardData=new s.k(this.leaderBoard),this.leaderBoardData.sort=this.matSort}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Ib({type:e,selectors:[["app-leader-board"]],viewQuery:function(e,t){if(1&e&&a.Nc(c.a,!0),2&e){let e;a.vc(e=a.fc())&&(t.matSort=e.first)}},inputs:{leaderBoard:"leaderBoard"},decls:9,vars:3,consts:[["mat-table","","matSort","","matSortActive","token","matSortDirection","desc","matSortDisableClear","",1,"table","table-hover","hover-shadow",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","token"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(a.Ub(0,"table",0),a.Sb(1,1),a.Hc(2,Me,2,0,"th",2),a.Hc(3,Le,2,1,"td",3),a.Rb(),a.Sb(4,4),a.Hc(5,Fe,2,0,"th",2),a.Hc(6,Ae,2,1,"td",3),a.Rb(),a.Hc(7,je,1,0,"tr",5),a.Hc(8,Ke,1,0,"tr",6),a.Tb()),2&e&&(a.oc("dataSource",t.leaderBoardData),a.Bb(7),a.oc("matHeaderRowDef",t.displayedColumns),a.Bb(1),a.oc("matRowDefColumns",t.displayedColumns))},directives:[s.j,c.a,s.c,s.e,s.b,s.g,s.i,s.d,c.b,s.a,s.f,s.h],styles:[""]}),e})();function Ge(e,t){1&e&&(a.Sb(0),a.Ub(1,"li",5),a.Ub(2,"a",16),a.Jc(3,"Questions"),a.Tb(),a.Tb(),a.Rb())}function Ye(e,t){if(1&e&&(a.Sb(0),a.Pb(1,"app-course-question-snippet",18),a.Rb()),2&e){const e=a.ic(2);a.Bb(1),a.oc("questions",null==e.course?null:e.course.question_set)("uqjs",null==e.course?null:e.course.uqjs)}}function Ve(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"div",17),a.Ub(2,"div",12),a.Hc(3,Ye,2,2,"ng-container",4),a.Tb(),a.Tb(),a.Rb()),2&e){const e=a.ic();a.Bb(3),a.oc("ngIf",e.course)}}function Qe(e,t){if(1&e&&(a.Sb(0),a.Pb(1,"app-course-events-snippet",19),a.Rb()),2&e){const e=a.ic();a.Bb(1),a.oc("events",null==e.course?null:e.course.events)("courseId",e.courseId)}}function ze(e,t){if(1&e&&(a.Sb(0),a.Pb(1,"app-token-use-snippet",20),a.Rb()),2&e){const e=a.ic();a.Bb(1),a.oc("courseReg",null==e.course?null:e.course.course_reg)}}function We(e,t){if(1&e&&(a.Sb(0),a.Pb(1,"app-leader-board",21),a.Rb()),2&e){const e=a.ic();a.Bb(1),a.oc("leaderBoard",null==e.course?null:e.course.leader_board)}}function Xe(e,t){1&e&&a.Qb(0)}let Ze=(()=>{class e{constructor(e,t,n){this.authenticationService=e,this.courseService=t,this.route=n,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(e=>this.user=e)}ngOnInit(){this.courseService.getCourse(this.courseId).subscribe(e=>{this.course=e})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(b.a),a.Ob(u.a),a.Ob(i.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-course"]],decls:59,vars:18,consts:[[1,"table","table-bordered","table-light","mt-5","hover-shadow"],[1,"thead-dark"],["scope","col"],["role","tablist",1,"nav","nav-tabs","mt-5"],[4,"ngIf"],["role","presentation",1,"nav-item"],["id","events-tab","data-toggle","tab","href","#events","role","tab","aria-controls","events","aria-selected","true",1,"nav-link","active"],["id","tokens-tab","data-toggle","tab","href","#tokens","role","tab","aria-controls","tokens","aria-selected","false",1,"nav-link"],["id","leader-board-tab","data-toggle","tab","href","#leader-board","role","tab","aria-controls","leader-board","aria-selected","false",1,"nav-link"],["id","concept-map-tab","data-toggle","tab","href","#concept-map","role","tab","aria-controls","concept-map","aria-selected","false",1,"nav-link"],["id","myTabContent",1,"tab-content"],["id","events","role","tabpanel","aria-labelledby","events-tab",1,"tab-pane","fade","show","active"],[1,"hover-shadow","p-3"],["id","tokens","role","tabpanel","aria-labelledby","tokens-tab",1,"tab-pane","fade"],["id","leader-board","role","tabpanel","aria-labelledby","leader-board-tab",1,"tab-pane","fade"],["id","concept-map","role","tabpanel","aria-labelledby","concept-map-tab",1,"tab-pane","fade"],["id","problem-set-tab","data-toggle","tab","href","#problem-set","role","tab","aria-controls","problem-set","aria-selected","true",1,"nav-link"],["id","problem-set","role","tabpanel","aria-labelledby","problem-set-tab",1,"tab-pane","fade"],[3,"questions","uqjs"],[3,"events","courseId"],[3,"courseReg"],[3,"leaderBoard"]],template:function(e,t){1&e&&(a.Ub(0,"table",0),a.Ub(1,"thead",1),a.Ub(2,"tr"),a.Ub(3,"th",2),a.Jc(4,"ID"),a.Tb(),a.Ub(5,"th",2),a.Jc(6,"Name"),a.Tb(),a.Ub(7,"th",2),a.Jc(8,"URL"),a.Tb(),a.Ub(9,"th",2),a.Jc(10,"Canvas\xa0Course\xa0Name"),a.Tb(),a.Ub(11,"th",2),a.Jc(12,"Start\xa0Date"),a.Tb(),a.Ub(13,"th",2),a.Jc(14,"End\xa0Date"),a.Tb(),a.Tb(),a.Tb(),a.Ub(15,"tbody"),a.Ub(16,"tr"),a.Ub(17,"td"),a.Jc(18),a.Tb(),a.Ub(19,"td"),a.Jc(20),a.Tb(),a.Ub(21,"td"),a.Jc(22),a.Tb(),a.Ub(23,"td"),a.Jc(24),a.Tb(),a.Ub(25,"td"),a.Jc(26),a.jc(27,"date"),a.Tb(),a.Ub(28,"td"),a.Jc(29),a.jc(30,"date"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(31,"ul",3),a.Hc(32,Ge,4,0,"ng-container",4),a.Ub(33,"li",5),a.Ub(34,"a",6),a.Jc(35,"Events"),a.Tb(),a.Tb(),a.Ub(36,"li",5),a.Ub(37,"a",7),a.Jc(38,"Token Use"),a.Tb(),a.Tb(),a.Ub(39,"li",5),a.Ub(40,"a",8),a.Jc(41,"Leader\xa0Board"),a.Tb(),a.Tb(),a.Ub(42,"li",5),a.Ub(43,"a",9),a.Jc(44,"Concepts"),a.Tb(),a.Tb(),a.Tb(),a.Ub(45,"div",10),a.Hc(46,Ve,4,1,"ng-container",4),a.Ub(47,"div",11),a.Ub(48,"div",12),a.Hc(49,Qe,2,2,"ng-container",4),a.Tb(),a.Tb(),a.Ub(50,"div",13),a.Ub(51,"div",12),a.Hc(52,ze,2,1,"ng-container",4),a.Tb(),a.Tb(),a.Ub(53,"div",14),a.Ub(54,"div",12),a.Hc(55,We,2,1,"ng-container",4),a.Tb(),a.Tb(),a.Ub(56,"div",15),a.Ub(57,"div",12),a.Hc(58,Xe,1,0,"ng-container",4),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Bb(18),a.Kc((null==t.course?null:t.course.id)||"No ID"),a.Bb(2),a.Kc((null==t.course?null:t.course.name)||"No Name"),a.Bb(2),a.Kc((null==t.course?null:t.course.url)||"No URL"),a.Bb(2),a.Kc((null==t.course?null:t.course.name)||"No Name"),a.Bb(2),a.Kc(a.lc(27,12,null==t.course?null:t.course.start_date,"LLL. dd, YYYY, hh:MM a")),a.Bb(3),a.Kc(a.lc(30,15,null==t.course?null:t.course.end_date,"LLL. dd, YYYY, hh:MM a")),a.Bb(3),a.oc("ngIf",null==t.user?null:t.user.is_teacher),a.Bb(14),a.oc("ngIf",null==t.user?null:t.user.is_teacher),a.Bb(3),a.oc("ngIf",t.course),a.Bb(3),a.oc("ngIf",t.course),a.Bb(3),a.oc("ngIf",t.course),a.Bb(3),a.oc("ngIf",t.course))},directives:[o.o,me,Ce,qe,$e],pipes:[o.e],styles:[".hover-shadow[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.445,.05,.55,.95)}.hover-shadow[_ngcontent-%COMP%]:hover{box-shadow:0 .65rem .65rem rgba(0,0,0,.08)}.tab-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#fff}"]}),e})();var et=n("n1FK"),tt=n("iadO");function nt(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"option",21),a.Jc(2),a.Tb(),a.Rb()),2&e){const e=t.$implicit;a.Bb(1),a.oc("value",e[0]),a.Bb(1),a.Kc(e[1])}}const ot=function(e){return["/course",e]},rt=e=>{const t=e.get("startPicker"),n=e.get("endPicker");return t.value>n.value?t.setErrors({forbiddenDateRange:{startDate:t.value,endDate:n.value}}):null};let it=(()=>{class e{constructor(e,t,n,o,r){this.route=e,this.builder=t,this.courseEventService=n,this.toastr=o,this.router=r}ngOnInit(){this.formData=this.builder.group({name:new E.g("",[E.y.required]),type:new E.g("",[E.y.required]),countForTokens:new E.g("",[E.y.required]),startPicker:new E.g(new Date,[E.y.required]),endPicker:new E.g(new Date,[E.y.required])},{validator:rt}),this.courseEventService.getEventTypes().subscribe(e=>this.localEventTypes=e),this.courseId=+this.route.snapshot.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(e=>{this.formData.patchValue({name:e.name,type:e.type,countForTokens:e.count_for_tokens,startPicker:new Date(e.start_date),endPicker:new Date(e.end_date)})}))}formatFormData(e){return{id:e.get("eventId").value,name:e.get("evenName").value,type:e.get("eventType").value,count_for_tokens:e.get("countsForTokens").value,start_date:e.get("startTime").value,end_date:e.get("endTime").value,course:this.courseId}}submitEvent(e){const t=this.formatFormData(e);this.eventId?this.courseEventService.updateCourseEvent(t).subscribe(()=>{this.toastr.success("The Event has been updated Successfully."),window.scroll(0,0)},e=>{this.toastr.error(e),console.warn(e),window.scroll(0,0)}):this.courseEventService.addCourseEvent(t).subscribe(()=>{this.router.navigate(["course/view",this.courseId]).then(),this.toastr.success("The Event has been added Successfully."),window.scroll(0,0)},e=>{this.toastr.error(e),console.warn(e),window.scroll(0,0)})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(i.a),a.Ob(E.f),a.Ob(W.a),a.Ob(H.b),a.Ob(i.b))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-course-event-create"]],decls:40,vars:18,consts:[["id","mainContainer",1,"container"],[1,"my-3"],["id","new-event",1,"form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","id-name"],["id","id-name","type","text","name","name","formControlName","name","placeholder","Event Name...",1,"form-control"],["for","id-type"],["id","id-type","name","type","formControlName","type",1,"form-control"],["value","","disabled","","selected",""],[4,"ngFor","ngForOf"],[1,"form-check","my-5"],["id","id-count-for-tokens","name","countForTokens","formControlName","countForTokens","type","checkbox",1,"form-check-input"],["for","id-count-for-tokens",1,"form-check-label"],["matInput","","placeholder","Choose a date","id","start-date-id","name","startPicker","formControlName","startPicker",3,"ngxMatDatetimePicker"],["matSuffix","",3,"for"],[3,"showSeconds","touchUi","stepHour","stepMinute"],["startPicker",""],["matInput","","placeholder","Choose a date","id","end-date-id","name","endPicker","formControlName","endPicker",3,"ngxMatDatetimePicker"],["endPicker",""],[1,"btn","btn-primary","my-2","mr-3",3,"routerLink"],["id","id-submit","type","submit","name","submit",1,"btn","btn-primary","my-2","mr-3",3,"disabled"],[3,"value"]],template:function(e,t){if(1&e&&(a.Ub(0,"div",0),a.Ub(1,"h2",1),a.Jc(2," Create Event "),a.Tb(),a.Ub(3,"form",2),a.ec("ngSubmit",function(){return t.submitEvent(t.formData)}),a.Ub(4,"div",3),a.Ub(5,"label",4),a.Jc(6,"Event Name"),a.Tb(),a.Pb(7,"input",5),a.Tb(),a.Ub(8,"div",3),a.Ub(9,"label",6),a.Jc(10,"Event type"),a.Tb(),a.Ub(11,"select",7),a.Ub(12,"option",8),a.Jc(13,"Select Event Type..."),a.Tb(),a.Hc(14,nt,3,2,"ng-container",9),a.Tb(),a.Tb(),a.Ub(15,"div",10),a.Pb(16,"input",11),a.Ub(17,"label",12),a.Jc(18,"Counts for tokens"),a.Tb(),a.Tb(),a.Ub(19,"div",3),a.Ub(20,"label",4),a.Jc(21,"Start Date & Time"),a.Tb(),a.Ub(22,"mat-form-field"),a.Pb(23,"input",13),a.Pb(24,"mat-datepicker-toggle",14),a.Pb(25,"ngx-mat-datetime-picker",15,16),a.Tb(),a.Tb(),a.Ub(27,"div",3),a.Ub(28,"label",4),a.Jc(29,"End Date & Time"),a.Tb(),a.Ub(30,"mat-form-field"),a.Pb(31,"input",17),a.Pb(32,"mat-datepicker-toggle",14),a.Pb(33,"ngx-mat-datetime-picker",15,18),a.Tb(),a.Tb(),a.Ub(35,"div",3),a.Ub(36,"button",19),a.Jc(37,"Back"),a.Tb(),a.Ub(38,"button",20),a.Jc(39,"Submit "),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e){const e=a.wc(26),n=a.wc(34);a.Bb(3),a.oc("formGroup",t.formData),a.Bb(11),a.oc("ngForOf",t.localEventTypes),a.Bb(9),a.oc("ngxMatDatetimePicker",e),a.Bb(1),a.oc("for",e),a.Bb(1),a.oc("showSeconds",!1)("touchUi",!0)("stepHour",1)("stepMinute",1),a.Bb(6),a.oc("ngxMatDatetimePicker",n),a.Bb(1),a.oc("for",n),a.Bb(1),a.oc("showSeconds",!1)("touchUi",!0)("stepHour",1)("stepMinute",1),a.Bb(3),a.oc("routerLink",a.sc(16,ot,t.courseId)),a.Bb(2),a.oc("disabled",t.formData.invalid)}},directives:[E.A,E.p,E.i,E.c,E.o,E.h,E.x,E.s,E.z,o.n,E.a,D.b,P.b,et.a,tt.f,D.f,et.b,i.c],styles:[".mat-form-field[_ngcontent-%COMP%]{display:block}"]}),e})();var ct=n("+mqk");const st=[{path:"",component:_,canActivate:[r.a]},{path:":courseId",component:Ze,canActivate:[r.a]},{path:":courseId/register",component:V,canActivate:[r.a]},{path:":courseId/new-event",component:it,canActivate:[r.a]},{path:":courseId/new-event/:eventId",component:it,canActivate:[r.a]},{path:":courseId/event/:eventId",component:me,canActivate:[r.a]},{path:":courseId/problem/:id",component:ct.a,canActivate:[r.a]},{path:":courseId/event/:eventId/problem/:id",component:ct.a,canActivate:[r.a]}];let at=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(t){return new(t||e)},imports:[[i.e.forChild(st)],i.e]}),e})();var bt=n("zioG"),ut=n("M9IT"),lt=n("QZHh"),dt=n("OtPg"),mt=n("NFeN"),ht=n("d3UM");let pt=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(t){return new(t||e)},imports:[[o.c,at,E.j,E.v,bt.b,ut.b,mt.b,O.d,P.c,x.c,c.c,s.l,tt.e,et.e,et.c,et.d,ht.b,Re.b,lt.b,dt.c]]}),e})()}}]);