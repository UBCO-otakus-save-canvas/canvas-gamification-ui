!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(s){a=!0,o=s}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{S4wv:function(t,r,i){"use strict";i.r(r),i.d(r,"CourseModule",function(){return _t});var c=i("ofXK"),a=i("p3Fh"),s=i("tyNb"),b=i("Dh3D"),u=i("+0xr"),l=i("fXoL"),d=i("DxEH"),m=i("6WEx");function f(e,t){1&e&&(l.Ub(0,"th",15),l.Jc(1," No."),l.Tb())}function p(e,t){if(1&e&&(l.Ub(0,"td",16),l.Jc(1),l.Tb()),2&e){var n=t.$implicit;l.Bb(1),l.Lc(" ",n.id||"No ID"," ")}}function h(e,t){1&e&&(l.Ub(0,"th",15),l.Jc(1," Name"),l.Tb())}function v(e,t){if(1&e&&(l.Ub(0,"td",16),l.Jc(1),l.Tb()),2&e){var n=t.$implicit;l.Bb(1),l.Lc(" ",n.name||"No Name"," ")}}function g(e,t){1&e&&(l.Ub(0,"th",15),l.Jc(1," Course Status"),l.Tb())}function T(e,t){if(1&e&&(l.Ub(0,"td",16),l.Jc(1),l.Tb()),2&e){var n=t.$implicit;l.Bb(1),l.Lc(" ",n.status||"No Status"," ")}}function U(e,t){1&e&&(l.Ub(0,"th",15),l.Jc(1," Registration Status"),l.Tb())}function y(e,t){1&e&&(l.Sb(0),l.Jc(1,"Registered"),l.Rb())}function k(e,t){1&e&&l.Jc(0,"Not Registered")}function I(e,t){if(1&e&&(l.Ub(0,"td",16),l.Hc(1,y,2,0,"ng-container",17),l.Hc(2,k,1,0,"ng-template",null,18,l.Ic),l.Tb()),2&e){var n=t.$implicit,r=l.wc(3);l.Bb(1),l.oc("ngIf",n.is_registered)("ngIfElse",r)}}function S(e,t){1&e&&(l.Ub(0,"th",19),l.Jc(1," Actions"),l.Tb())}var C=function(e){return[e]};function w(e,t){if(1&e&&(l.Ub(0,"a",23),l.Jc(1,"Open"),l.Tb()),2&e){var n=l.ic().$implicit;l.oc("routerLink",l.sc(1,C,n.id))}}var B=function(e){return[e,"register"]};function J(e,t){if(1&e&&(l.Ub(0,"a",24),l.Jc(1,"Register"),l.Tb()),2&e){var n=l.ic().$implicit;l.oc("routerLink",l.sc(1,B,n.id))}}function _(e,t){if(1&e&&(l.Ub(0,"td",20),l.Hc(1,w,2,3,"a",21),l.Hc(2,J,2,3,"a",22),l.Tb()),2&e){var n=t.$implicit,r=l.ic();l.Bb(1),l.oc("ngIf",r.hasViewPermission(n.id)),l.Bb(1),l.oc("ngIf",!n.is_registered)}}function E(e,t){1&e&&l.Pb(0,"tr",25)}function N(e,t){1&e&&l.Pb(0,"tr",26)}var O,R=((O=function(){function e(t,r,o){var i=this;n(this,e),this.authenticationService=t,this.route=r,this.courseService=o,this.displayedColumns=["id","name","status","is_registered","actions"],this.courseList=new u.k,this.authenticationService.currentUser.subscribe(function(e){return i.user=e})}return o(e,[{key:"ngAfterViewInit",value:function(){var e=this;this.courseService.getCourses().subscribe(function(t){e.allCourses=t,e.courseList=new u.k(t),e.courseList.sort=e.sort})}},{key:"hasViewPermission",value:function(e){var t;return this.user.is_teacher||!!(null===(t=this.allCourses.find(function(t){return t.id===e}))||void 0===t?void 0:t.is_registered)}}]),e}()).\u0275fac=function(e){return new(e||O)(l.Ob(d.a),l.Ob(s.a),l.Ob(m.a))},O.\u0275cmp=l.Ib({type:O,selectors:[["app-course-list"]],viewQuery:function(e,t){var n;1&e&&l.Nc(b.a,!0),2&e&&l.vc(n=l.fc())&&(t.sort=n.first)},decls:22,vars:3,consts:[[1,"course-list-page"],[1,"mx-auto"],[1,"my-md-2"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"table","table-hover","hover-shadow",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","status"],["matColumnDef","is_registered"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","actions",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf","ngIfElse"],["notRegistered",""],["mat-header-cell",""],["mat-cell","",1,"actions"],["class","btn btn-primary mr-3",3,"routerLink",4,"ngIf"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[1,"btn","btn-primary","mr-3",3,"routerLink"],[1,"btn","btn-primary",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"h1",2),l.Jc(3,"Course List"),l.Tb(),l.Ub(4,"table",3),l.Sb(5,4),l.Hc(6,f,2,0,"th",5),l.Hc(7,p,2,1,"td",6),l.Rb(),l.Sb(8,7),l.Hc(9,h,2,0,"th",5),l.Hc(10,v,2,1,"td",6),l.Rb(),l.Sb(11,8),l.Hc(12,g,2,0,"th",5),l.Hc(13,T,2,1,"td",6),l.Rb(),l.Sb(14,9),l.Hc(15,U,2,0,"th",5),l.Hc(16,I,4,2,"td",6),l.Rb(),l.Sb(17,10),l.Hc(18,S,2,0,"th",11),l.Hc(19,_,3,2,"td",12),l.Rb(),l.Hc(20,E,1,0,"tr",13),l.Hc(21,N,1,0,"tr",14),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Bb(4),l.oc("dataSource",t.courseList),l.Bb(16),l.oc("matHeaderRowDef",t.displayedColumns),l.Bb(1),l.oc("matRowDefColumns",t.displayedColumns))},directives:[u.j,b.a,u.c,u.e,u.b,u.g,u.i,u.d,b.b,u.a,c.o,s.d,u.f,u.h],styles:[".hover-shadow[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.445,.05,.55,.95)}.hover-shadow[_ngcontent-%COMP%]:hover{box-shadow:0 .65rem .65rem rgba(0,0,0,.08)}"]}),O),H=i("3Pt+"),D=i("B/XX"),P=i("nPby"),x=i("5eHb"),M=i("xHqg"),q=i("kmnG"),L=i("qFsG"),A=i("bTqV"),F=["stepper"];function j(e,t){1&e&&l.Jc(0,"Identification")}function K(e,t){1&e&&l.Jc(0,"Confirm Identity")}function $(e,t){if(1&e){var n=l.Vb();l.Sb(0),l.Hc(1,K,1,0,"ng-template",7),l.Ub(2,"mat-form-field"),l.Ub(3,"mat-label"),l.Jc(4,"Student Number"),l.Tb(),l.Pb(5,"input",19),l.Tb(),l.Ub(6,"div"),l.Ub(7,"button",20),l.ec("click",function(){return l.yc(n),l.ic().reset()}),l.Jc(8,"Back"),l.Tb(),l.Ub(9,"button",10),l.ec("click",function(){return l.yc(n),l.ic().registerStepSubmit()}),l.Jc(10,"Submit"),l.Tb(),l.Tb(),l.Rb()}}function G(e,t){1&e&&l.Jc(0,"Confirm Identity")}function Y(e,t){if(1&e){var n=l.Vb();l.Hc(0,G,1,0,"ng-template",7),l.Ub(1,"mat-form-field"),l.Ub(2,"mat-label"),l.Jc(3,"Please confirm the following details."),l.Tb(),l.Pb(4,"input",21),l.Tb(),l.Ub(5,"div"),l.Ub(6,"button",20),l.ec("click",function(){return l.yc(n),l.ic().reset()}),l.Jc(7,"Back"),l.Tb(),l.Ub(8,"button",10),l.ec("click",function(){return l.yc(n),l.ic().registerStepSubmit()}),l.Jc(9,"Confirm"),l.Tb(),l.Tb()}if(2&e){var r=l.ic();l.Bb(4),l.oc("value",r.serverGuessedName)}}function V(e,t){1&e&&l.Jc(0,"Verification")}function Q(e,t){if(1&e&&(l.Ub(0,"p"),l.Jc(1),l.Tb()),2&e){var n=l.ic();l.Bb(1),l.Lc("Attempts Remaining: ",n.attemptsRemaining,"")}}function z(e,t){1&e&&l.Jc(0,"Done")}var W,X=function(e){return["/course",e]},Z=((W=function(){function e(t,r,o,i){n(this,e),this.route=t,this.formBuilder=r,this.courseService=o,this.toastr=i,this.courseId=this.route.snapshot.params.courseId,this.needsStudentNumber=!1,this.verification=!1,this.completed=!1,this.editable=!1}return o(e,[{key:"ngOnInit",value:function(){this.nameForm=this.formBuilder.group({nameControl:["",H.y.required]}),this.confirmNameForm=this.formBuilder.group({confirmNameControl:[""]}),this.studentNumberForm=this.formBuilder.group({studentNumberControl:["",H.y.required]}),this.verifyForm=this.formBuilder.group({verifyControl:["",H.y.required]}),this.getRegistrationStatus()}},{key:"getRegistrationStatus",value:function(){var e=this;this.courseService.getCourseRegistrationStatus(this.courseId).subscribe(function(t){t.message&&e.toastr.error(t.message),e.initialStage(t.status)})}},{key:"initialStage",value:function(e){this.completed=e===P.a.REGISTERED,this.verification=e===P.a.AWAIT_VERIFICATION,this.selectedIndex=e===P.a.REGISTERED?3:e===P.a.AWAIT_VERIFICATION?2:0}},{key:"setRegistrationStage",value:function(e){this.serverGuessedName=null==e?void 0:e.guessed_name,this.attemptsRemaining=null==e?void 0:e.attempts_remaining,e.success?this.nextStep():0===this.stepper.selectedIndex&&(this.needsStudentNumber=!0,this.nextStep())}},{key:"registerStepSubmit",value:function(){var e=this,t=this.retrieveFormData();this.needsStudentNumber=!1,(t.name||t.student_number)&&this.courseService.register(this.courseId,t).subscribe(function(t){t.bad_request?e.sendErrorMessage():e.setRegistrationStage(t)})}},{key:"verifyStepSubmit",value:function(){var e=this,t=this.retrieveFormData();t.code&&this.courseService.registerVerify(this.courseId,t).subscribe(function(t){t.bad_request?e.sendErrorMessage():e.setRegistrationStage(t)})}},{key:"retrieveFormData",value:function(){return{name:this.nameForm.get("nameControl").value||null,confirmed_name:this.serverGuessedName||null,student_number:this.studentNumberForm.get("studentNumberControl").value||null,code:this.verifyForm.get("verifyControl").value||null}}},{key:"nextStep",value:function(){this.stepper.selected.completed=!0,this.stepper.next()}},{key:"sendErrorMessage",value:function(){this.toastr.error("Something went wrong. Check that your inputted values are accurate and try again.")}},{key:"reset",value:function(){this.serverGuessedName=null,this.stepper.reset()}}]),e}()).\u0275fac=function(e){return new(e||W)(l.Ob(s.a),l.Ob(H.f),l.Ob(m.a),l.Ob(x.b))},W.\u0275cmp=l.Ib({type:W,selectors:[["app-register"]],viewQuery:function(e,t){var n;1&e&&l.Nc(F,!0),2&e&&l.vc(n=l.fc())&&(t.stepper=n.first)},features:[l.Ab([{provide:D.h,useValue:{displayDefaultIndicatorType:!1,showError:!0}}])],decls:40,vars:21,consts:[[1,"container"],[1,"my-5"],["role","alert",1,"alert","alert-info"],["linear","",1,"border-success",3,"selectedIndex"],["stepper",""],["errorMessage","Name is required",3,"stepControl","editable","completed"],[3,"formGroup"],["matStepLabel",""],[1,"w-50"],["matInput","","placeholder","Ex. John Doe","formControlName","nameControl","required",""],["mat-button","",1,"btn","btn-success",3,"click"],["errorMessage","Student Number is required",3,"stepControl","editable","completed"],[4,"ngIf","ngIfElse"],["confirmNameOnly",""],["errorMessage","Verification is required",3,"stepControl","editable","completed"],["matInput","","placeholder","Ex. 1234","formControlName","verifyControl","required",""],[4,"ngIf"],[3,"editable","completed"],["mat-button","",1,"btn","btn-primary",3,"routerLink"],["type","number","matInput","","formControlName","studentNumberControl","placeholder","Ex. 12345678","required",""],["mat-button","",1,"btn","btn-danger",3,"click"],["matInput","","placeholder","Ex. John Doe","formControlName","confirmNameControl","disabled","",3,"value"]],template:function(e,t){if(1&e&&(l.Ub(0,"div",0),l.Ub(1,"h1",1),l.Jc(2,"Course Registration"),l.Tb(),l.Ub(3,"div",2),l.Jc(4," Note: You can only register in courses that you are also registered in on Canvas! "),l.Tb(),l.Ub(5,"mat-horizontal-stepper",3,4),l.Ub(7,"mat-step",5),l.Ub(8,"form",6),l.Hc(9,j,1,0,"ng-template",7),l.Ub(10,"mat-form-field",8),l.Ub(11,"mat-label"),l.Jc(12,"Your full name as it appears on Canvas"),l.Tb(),l.Pb(13,"input",9),l.Tb(),l.Ub(14,"div"),l.Ub(15,"button",10),l.ec("click",function(){return t.registerStepSubmit()}),l.Jc(16,"Submit"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(17,"mat-step",11),l.Ub(18,"form",6),l.Hc(19,$,11,0,"ng-container",12),l.Hc(20,Y,10,1,"ng-template",null,13,l.Ic),l.Tb(),l.Tb(),l.Ub(22,"mat-step",14),l.Ub(23,"form",6),l.Hc(24,V,1,0,"ng-template",7),l.Ub(25,"mat-form-field"),l.Ub(26,"mat-label"),l.Jc(27,"Verification Code"),l.Tb(),l.Pb(28,"input",15),l.Tb(),l.Hc(29,Q,2,1,"p",16),l.Ub(30,"div"),l.Ub(31,"button",10),l.ec("click",function(){return t.verifyStepSubmit()}),l.Jc(32,"Submit"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(33,"mat-step",17),l.Hc(34,z,1,0,"ng-template",7),l.Ub(35,"p"),l.Jc(36,"Registration Complete."),l.Tb(),l.Ub(37,"div"),l.Ub(38,"a",18),l.Jc(39,"Open Course"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e){var n=l.wc(21);l.Bb(5),l.oc("selectedIndex",t.selectedIndex),l.Bb(2),l.oc("stepControl",t.nameForm)("editable",t.editable)("completed",t.completed||t.verification),l.Bb(1),l.oc("formGroup",t.nameForm),l.Bb(9),l.oc("stepControl",t.needsStudentNumber?t.studentNumberForm:t.confirmNameForm)("editable",t.editable)("completed",t.completed||t.verification),l.Bb(1),l.oc("formGroup",t.needsStudentNumber?t.studentNumberForm:t.confirmNameForm),l.Bb(1),l.oc("ngIf",t.needsStudentNumber)("ngIfElse",n),l.Bb(3),l.oc("stepControl",t.verifyForm)("editable",t.editable)("completed",t.completed),l.Bb(1),l.oc("formGroup",t.verifyForm),l.Bb(6),l.oc("ngIf",t.attemptsRemaining),l.Bb(4),l.oc("editable",t.editable)("completed",t.completed),l.Bb(5),l.oc("routerLink",l.sc(19,X,t.courseId))}},directives:[M.a,M.b,H.A,H.p,H.i,M.c,q.b,q.e,L.b,H.c,H.o,H.h,H.w,A.b,c.o,A.a,s.d,H.t],styles:[""]}),W),ee=i("cp0P"),te=i("tO5q"),ne=i("sG26");function re(e,t){if(1&e&&(l.Ub(0,"h2",7),l.Jc(1),l.Tb()),2&e){var n=l.ic(2);l.Bb(1),l.Lc("",n.event.name," Questions")}}function oe(e,t){1&e&&(l.Sb(0),l.Ub(1,"th",4),l.Jc(2,"Num\xa0Attempts"),l.Tb(),l.Rb())}function ie(e,t){if(1&e&&(l.Sb(0),l.Ub(1,"td"),l.Jc(2),l.Tb(),l.Rb()),2&e){var n=l.ic().$implicit;l.Bb(2),l.Mc(" ",n.num_attempts," / ",n.question.max_submission_allowed," ")}}var ce=function(e,t,n){return["/course",e,"event",t,"problem",n]};function ae(e,t){if(1&e&&(l.Sb(0),l.Ub(1,"a",10),l.Jc(2,"Open"),l.Tb(),l.Rb()),2&e){var n=l.ic().$implicit,r=l.ic(3);l.Bb(1),l.oc("routerLink",l.uc(1,ce,r.courseId,r.eventId,n.question.id))}}var se=function(e,t){return["/course",e,"problem",t]};function be(e,t){if(1&e&&(l.Ub(0,"a",10),l.Jc(1,"Open"),l.Tb()),2&e){var n=l.ic().$implicit,r=l.ic(3);l.oc("routerLink",l.tc(1,se,r.courseId,n.question.id))}}var ue=function(e){return["/problem",e,"edit"]};function le(e,t){if(1&e&&(l.Sb(0),l.Ub(1,"a",11),l.Jc(2,"Edit"),l.Tb(),l.Rb()),2&e){var n=l.ic().$implicit;l.Bb(1),l.oc("routerLink",l.sc(1,ue,n.question.id))}}function de(e,t){if(1&e&&(l.Sb(0),l.Ub(1,"tr"),l.Ub(2,"td"),l.Jc(3),l.Tb(),l.Ub(4,"td"),l.Jc(5),l.Tb(),l.Ub(6,"td"),l.Jc(7),l.Tb(),l.Ub(8,"td"),l.Jc(9),l.Tb(),l.Ub(10,"td"),l.Jc(11),l.Tb(),l.Hc(12,ie,3,2,"ng-container",0),l.Ub(13,"td"),l.Hc(14,ae,3,5,"ng-container",5),l.Hc(15,be,2,4,"ng-template",null,9,l.Ic),l.Hc(17,le,3,3,"ng-container",0),l.Tb(),l.Tb(),l.Rb()),2&e){var n=t.$implicit,r=l.wc(16),o=l.ic(3);l.Bb(1),l.Cb("class",o.highlight(o.getStatus(n))),l.Bb(2),l.Kc(n.question.parent_category_name||"No Category"),l.Bb(2),l.Kc(n.question.category_name||"No Sub-Category"),l.Bb(2),l.Kc(n.question.type_name||"No Type"),l.Bb(2),l.Kc(n.formatted_current_tokens_received||"No Tokens"),l.Bb(2),l.Kc(o.getStatus(n)||"No Status"),l.Bb(1),l.oc("ngIf",o.eventId),l.Bb(2),l.oc("ngIf",o.eventId)("ngIfElse",r),l.Bb(3),l.oc("ngIf",o.user.is_teacher)}}function me(e,t){if(1&e&&(l.Sb(0),l.Hc(1,de,18,10,"ng-container",8),l.Rb()),2&e){var n=l.ic(2);l.Bb(1),l.oc("ngForOf",n.uqjs)}}function fe(e,t){1&e&&(l.Ub(0,"p",15),l.Jc(1," There aren't currently any questions in this event. "),l.Tb())}function pe(e,t){1&e&&(l.Ub(0,"p",15),l.Jc(1," There aren't currently any questions in this course. "),l.Tb())}function he(e,t){if(1&e&&(l.Ub(0,"tr"),l.Ub(1,"td",12),l.Hc(2,fe,2,0,"p",13),l.Hc(3,pe,2,0,"ng-template",null,14,l.Ic),l.Tb(),l.Tb()),2&e){var n=l.wc(4),r=l.ic(2);l.Bb(1),l.Cb("colspan",r.eventId?7:6),l.Bb(1),l.oc("ngIf",r.eventId)("ngIfElse",n)}}function ve(e,t){if(1&e&&(l.Sb(0),l.Ub(1,"div"),l.Hc(2,re,2,1,"h2",1),l.Ub(3,"table",2),l.Ub(4,"thead",3),l.Ub(5,"tr"),l.Ub(6,"th",4),l.Jc(7,"Category"),l.Tb(),l.Ub(8,"th",4),l.Jc(9,"Sub\xa0Category"),l.Tb(),l.Ub(10,"th",4),l.Jc(11,"Format"),l.Tb(),l.Ub(12,"th",4),l.Jc(13,"Tokens Earned"),l.Tb(),l.Ub(14,"th",4),l.Jc(15,"Status"),l.Tb(),l.Hc(16,oe,3,0,"ng-container",0),l.Ub(17,"th",4),l.Jc(18,"Action"),l.Tb(),l.Tb(),l.Tb(),l.Ub(19,"tbody"),l.Hc(20,me,2,1,"ng-container",5),l.Hc(21,he,5,3,"ng-template",null,6,l.Ic),l.Tb(),l.Tb(),l.Tb(),l.Rb()),2&e){var n=l.wc(22),r=l.ic();l.Bb(1),l.Gb("container",r.eventId),l.Bb(1),l.oc("ngIf",r.eventId),l.Bb(14),l.oc("ngIf",r.eventId),l.Bb(4),l.oc("ngIf",r.uqjs.length)("ngIfElse",n)}}var ge,Te=((ge=function(){function e(t,r,o,i,c,a){var s=this;n(this,e),this.authenticationService=t,this.router=r,this.route=o,this.uqjService=i,this.courseEventService=c,this.courseService=a,this.authenticationService.currentUser.subscribe(function(e){return s.user=e})}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.courseId=+this.route.snapshot.paramMap.get("courseId")||null,this.eventId=+this.route.snapshot.paramMap.get("eventId")||null,this.eventId&&this.courseId&&this.courseService.validateEvent(this.courseId,this.eventId).subscribe(function(t){t.success?Object(ee.a)({event:e.courseEventService.getCourseEvent(e.eventId),uqjs:e.uqjService.getUQJs({filters:{question_event:e.eventId}})}).subscribe(function(t){e.event=t.event,e.uqjs=t.uqjs.results}):e.router.navigate(["course/view",e.courseId]).then()})}},{key:"getStatus",value:function(e){return e.question.event&&e.question.is_exam?e.question.is_exam&&e.num_attempts>0?"Submitted":e.question.is_exam?"Not submitted":void 0:e.status}},{key:"highlight",value:function(e){return 0===e.localeCompare("Solved")?"highlight-success":0===e.localeCompare("Partially Solved")?"highlight-warning":0===e.localeCompare("Wrong")?"highlight-danger":""}}]),e}()).\u0275fac=function(e){return new(e||ge)(l.Ob(d.a),l.Ob(s.b),l.Ob(s.a),l.Ob(te.a),l.Ob(ne.a),l.Ob(m.a))},ge.\u0275cmp=l.Ib({type:ge,selectors:[["app-course-question-snippet"]],inputs:{questions:"questions",uqjs:"uqjs"},decls:1,vars:1,consts:[[4,"ngIf"],["class","mb-3 mt-5",4,"ngIf"],["data-toggle","table",1,"table","table-hover","mt-3"],[1,"thead-light","text-dark"],["scope","col"],[4,"ngIf","ngIfElse"],["tableEmpty",""],[1,"mb-3","mt-5"],[4,"ngFor","ngForOf"],["noEvent",""],[1,"btn","btn-primary","mr-3",3,"routerLink"],[1,"btn","btn-warning","mr-3",3,"routerLink"],[1,"bg-info"],["class","text-center text-light m-0",4,"ngIf","ngIfElse"],["inCourse",""],[1,"text-center","text-light","m-0"]],template:function(e,t){1&e&&l.Hc(0,ve,23,6,"ng-container",0),2&e&&l.oc("ngIf",t.uqjs)},directives:[c.o,c.n,s.d],styles:[".highlight-success[_ngcontent-%COMP%]{background-color:rgba(32,201,151,.3)}.highlight-success[_ngcontent-%COMP%]:hover{background-color:rgba(32,201,151,.6)}.highlight-warning[_ngcontent-%COMP%]{background-color:rgba(255,166,61,.3)}.highlight-warning[_ngcontent-%COMP%]:hover{background-color:rgba(255,166,61,.6)}.highlight-danger[_ngcontent-%COMP%]{background-color:rgba(255,69,87,.3)}.highlight-danger[_ngcontent-%COMP%]:hover{background-color:rgba(255,69,87,.6)}"]}),ge),Ue=function(e){return["/course",e,"new-event"]};function ye(e,t){if(1&e&&(l.Sb(0),l.Ub(1,"a",6),l.Jc(2,"Add an Event"),l.Tb(),l.Ub(3,"a",7),l.Jc(4,"Import an Event"),l.Tb(),l.Rb()),2&e){var n=l.ic();l.Bb(1),l.oc("routerLink",l.sc(1,Ue,n.courseId))}}function ke(e,t){1&e&&(l.Ub(0,"td"),l.Jc(1,"Not Available Yet"),l.Tb())}function Ie(e,t){if(1&e&&(l.Ub(0,"td"),l.Jc(1),l.jc(2,"number"),l.Tb()),2&e){var n=l.ic().$implicit;l.Bb(1),l.Lc("",l.lc(2,1,n.total_event_grade,"1.0-1"),"%")}}var Se=function(e,t){return["/course",e,"event",t]};function Ce(e,t){if(1&e&&(l.Sb(0),l.Ub(1,"a",13),l.Jc(2),l.Tb(),l.Rb()),2&e){var n=l.ic().$implicit,r=l.ic(2);l.Bb(1),l.oc("routerLink",l.tc(2,Se,r.courseId,n.id)),l.Bb(1),l.Kc(r.getEventButtonText(n))}}function we(e,t){if(1&e&&(l.Ub(0,"a",14),l.Jc(1),l.Tb()),2&e){var n=l.ic().$implicit,r=l.ic(2);l.Bb(1),l.Kc(r.getEventButtonText(n))}}var Be=function(e,t){return["/course",e,"new-event",t]};function Je(e,t){if(1&e&&(l.Ub(0,"a",15),l.Jc(1,"Edit"),l.Tb()),2&e){var n=l.ic().$implicit,r=l.ic(2);l.oc("routerLink",l.tc(1,Be,r.courseId,n.id))}}function _e(e,t){if(1&e&&(l.Sb(0),l.Ub(1,"tr"),l.Ub(2,"td"),l.Jc(3),l.Tb(),l.Ub(4,"td"),l.Jc(5),l.jc(6,"date"),l.Tb(),l.Ub(7,"td"),l.Jc(8),l.jc(9,"date"),l.Tb(),l.Hc(10,ke,2,0,"td",4),l.Hc(11,Ie,3,4,"ng-template",null,9,l.Ic),l.Ub(13,"td"),l.Ub(14,"div",10),l.Hc(15,Ce,3,5,"ng-container",4),l.Hc(16,we,2,1,"ng-template",null,11,l.Ic),l.Hc(18,Je,2,4,"a",12),l.Tb(),l.Tb(),l.Tb(),l.Rb()),2&e){var n=t.$implicit,r=l.wc(12),o=l.wc(17),i=l.ic(2);l.Bb(3),l.Kc(n.name||"N/A"),l.Bb(2),l.Kc(l.lc(6,8,n.start_date,"LLL. dd, YYYY, hh:MM a")),l.Bb(3),l.Kc(l.lc(9,11,n.end_date,"LLL. dd, YYYY, hh:MM a")),l.Bb(2),l.oc("ngIf",i.isExamAndOpen(n))("ngIfElse",r),l.Bb(5),l.oc("ngIf",n.is_allowed_to_open||(null==i.user?null:i.user.is_teacher))("ngIfElse",o),l.Bb(3),l.oc("ngIf",n.has_edit_permission)}}function Ee(e,t){if(1&e&&(l.Sb(0),l.Hc(1,_e,19,14,"ng-container",8),l.Rb()),2&e){var n=l.ic();l.Bb(1),l.oc("ngForOf",n.events)}}function Ne(e,t){1&e&&(l.Ub(0,"tr"),l.Ub(1,"td",16),l.Ub(2,"p",17),l.Jc(3,"There are currently no events in this course."),l.Tb(),l.Tb(),l.Tb())}var Oe,Re,He=((Oe=function(){function t(e,r){n(this,t),this.authenticationService=e,this.courseEventService=r}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.authenticationService.currentUser.subscribe(function(e){return t.user=e}),this.courseEventService.getEventTypes().subscribe(function(n){t.eventTypes=n,t.eventTypesMap=new Map(t.eventTypes.map(function(t){var n=e(t,2);return[n[0],n[1]]}))})}},{key:"getEventButtonText",value:function(e){if(this.eventTypes)return(this.user.is_teacher?"Open ":"Do ")+this.eventTypesMap.get(e.type)}},{key:"isExamAndOpen",value:function(e){return e.is_open&&e.is_exam}}]),t}()).\u0275fac=function(e){return new(e||Oe)(l.Ob(d.a),l.Ob(ne.a))},Oe.\u0275cmp=l.Ib({type:Oe,selectors:[["app-course-events-snippet"]],inputs:{events:"events",courseId:"courseId"},decls:19,vars:3,consts:[[4,"ngIf"],["data-toggle","table",1,"table","table-hover","mt-1"],[1,"thead-light","text-dark"],["scope","col"],[4,"ngIf","ngIfElse"],["tableEmpty",""],[1,"btn","btn-primary","my-2","mr-3",3,"routerLink"],["href","#",1,"btn","btn-primary","my-2"],[4,"ngFor","ngForOf"],["totalEventGrade",""],[1,"btn-container"],["notAllowedOpen",""],["class","btn btn-primary edit-btn",3,"routerLink",4,"ngIf"],[1,"btn","btn-primary","mr-3",3,"routerLink"],["href","#",1,"btn","btn-outline-info","open-btn","mr-3","disabled"],[1,"btn","btn-primary","edit-btn",3,"routerLink"],["colspan","6",1,"bg-info"],[1,"text-center","text-light","m-0"]],template:function(e,t){if(1&e&&(l.Hc(0,ye,5,3,"ng-container",0),l.Pb(1,"hr"),l.Ub(2,"table",1),l.Ub(3,"thead",2),l.Ub(4,"tr"),l.Ub(5,"th",3),l.Jc(6,"Name"),l.Tb(),l.Ub(7,"th",3),l.Jc(8,"Start\xa0Date"),l.Tb(),l.Ub(9,"th",3),l.Jc(10,"End\xa0Date"),l.Tb(),l.Ub(11,"th",3),l.Jc(12,"Grade"),l.Tb(),l.Ub(13,"th",3),l.Jc(14,"Actions"),l.Tb(),l.Tb(),l.Tb(),l.Ub(15,"tbody"),l.Hc(16,Ee,2,1,"ng-container",4),l.Hc(17,Ne,4,0,"ng-template",null,5,l.Ic),l.Tb(),l.Tb()),2&e){var n=l.wc(18);l.oc("ngIf",null==t.user?null:t.user.is_teacher),l.Bb(16),l.oc("ngIf",t.events)("ngIfElse",n)}},directives:[c.o,s.d,c.n],pipes:[c.e,c.f],styles:[""]}),Oe),De=i("wHSu"),Pe=i("tk/3"),xe=i("JIr8"),Me=i("RJTb"),qe=((Re=function(){function e(t,r){n(this,e),this.http=t,this.apiService=r}return o(e,[{key:"useTokens",value:function(e,t){var n=new Pe.d({"Content-Type":"application/json"}),r=this.apiService.getURL("token-use","use",t);return this.http.post(r,e,{headers:n}).pipe(Object(xe.a)(this.apiService.handleError("Error occurred while attempting to use tokens",{success:!1,bad_request:!0})))}}]),e}()).\u0275fac=function(e){return new(e||Re)(l.bc(Pe.b),l.bc(Me.a))},Re.\u0275prov=l.Kb({token:Re,factory:Re.\u0275fac,providedIn:"root"}),Re),Le=i("6NWb");function Ae(e,t){1&e&&(l.Sb(0),l.Ub(1,"h3",14),l.Jc(2,"Warning: You are logged in as a teacher! Token uses will not do anything for you!"),l.Tb(),l.Rb())}var Fe=function(){return{standalone:!0}};function je(e,t){if(1&e){var n=l.Vb();l.Sb(0),l.Ub(1,"tr"),l.Ub(2,"td"),l.Jc(3),l.Tb(),l.Ub(4,"td",16),l.Jc(5),l.Tb(),l.Ub(6,"td"),l.Jc(7),l.Tb(),l.Ub(8,"td"),l.Jc(9),l.Tb(),l.Ub(10,"td"),l.Ub(11,"form",17),l.Ub(12,"button",18),l.ec("click",function(){l.yc(n);var e=t.$implicit;return l.ic(2).useToken(e,-1)}),l.Pb(13,"fa-icon",19),l.Tb(),l.Ub(14,"label",20),l.Jc(15),l.Tb(),l.Ub(16,"input",21),l.ec("ngModelChange",function(e){return t.$implicit.num_used=e})("ngModelChange",function(){return l.yc(n),l.ic(2).calculateCurrentTotal()}),l.Tb(),l.Ub(17,"button",22),l.ec("click",function(){l.yc(n);var e=t.$implicit;return l.ic(2).useToken(e,1)}),l.Pb(18,"fa-icon",23),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Rb()}if(2&e){var r=t.$implicit,o=l.ic(2);l.Bb(3),l.Kc(r.option.assignment_name||"No Name"),l.Bb(1),l.qc("id","req_tokens_",r.option.id,""),l.Bb(1),l.Kc(r.option.tokens_required||"No Value"),l.Bb(2),l.Kc(r.option.points_given||"No Points"),l.Bb(2),l.Kc(r.option.maximum_number_of_use||"No Value"),l.Bb(4),l.oc("icon",o.faMinus),l.Bb(1),l.Cb("for","tokenUseAction"+r.option.id),l.Bb(1),l.Lc("Number of token use option ",r.option.id," to use"),l.Bb(1),l.oc("ngModel",r.num_used)("ngModelOptions",l.rc(13,Fe)),l.Cb("id","tokenUseAction"+r.option.id)("max",r.option.maximum_number_of_use),l.Bb(2),l.oc("icon",o.faPlus)}}function Ke(e,t){if(1&e&&(l.Sb(0),l.Hc(1,je,19,14,"ng-container",15),l.Rb()),2&e){var n=l.ic();l.Bb(1),l.oc("ngForOf",n.courseReg.token_uses)}}function $e(e,t){1&e&&(l.Ub(0,"tr"),l.Ub(1,"td",24),l.Ub(2,"p",25),l.Jc(3," There are currently no options for token use in this course. "),l.Tb(),l.Tb(),l.Tb())}var Ge,Ye=((Ge=function(){function e(t,r,o,i){var c=this;n(this,e),this.tokenUseService=t,this.route=r,this.authenticationService=o,this.toastr=i,this.tokenUses={},this.faMinus=De.d,this.faPlus=De.f,this.authenticationService.currentUser.subscribe(function(e){return c.user=e})}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.courseReg.token_uses.forEach(function(t){e.tokenUses[t.option.id]=t}),this.calculateCurrentTotal()}},{key:"useToken",value:function(e,t){e.num_used+=t,this.calculateCurrentTotal()}},{key:"calculateCurrentTotal",value:function(){for(var e in this.remainingTokens=this.courseReg.total_tokens_received,this.tokenUses)this.remainingTokens-=this.tokenUses[e].num_used*this.tokenUses[e].option.tokens_required;this.invalid=this.remainingTokens<0}},{key:"confirmChanges",value:function(){var e=this,t=this.route.snapshot.params.courseId,n={};for(var r in this.tokenUses)n[r]=this.tokenUses[r].num_used;this.tokenUseService.useTokens(n,t).subscribe(function(){e.toastr.success("Token uses saved!.")})}}]),e}()).\u0275fac=function(e){return new(e||Ge)(l.Ob(qe),l.Ob(s.a),l.Ob(d.a),l.Ob(x.b))},Ge.\u0275cmp=l.Ib({type:Ge,selectors:[["app-token-use-snippet"]],inputs:{courseReg:"courseReg"},decls:33,vars:16,consts:[[4,"ngIf"],[1,"card","border-secondary",2,"width","18rem"],[1,"card-body"],[1,"card-text"],["id","available_tokens"],["id","remaining_tokens_text",1,"card-text"],["id","remaining_tokens"],["method","post",1,"mt-3"],["data-toggle","table",1,"table","table-hover"],[1,"thead-light","text-dark"],["scope","col"],[4,"ngIf","ngIfElse"],["tableEmpty",""],["id","submit_button",1,"my-1","btn","btn-primary",3,"disabled","click"],[1,"card-text","red-text"],[4,"ngFor","ngForOf"],[3,"id"],[1,"form-inline"],[1,"btn","btn-danger","action-icon",3,"click"],[1,"fa","button-icon","fa-minus",3,"icon"],[1,"sr-only"],["type","number","min","0",1,"form-control","input-sm","mx-sm-2","token-input","no-spin-button",3,"ngModel","ngModelOptions","ngModelChange"],[1,"btn","btn-success","action-icon",3,"click"],[1,"fa","button-icon","fa-plus",3,"icon"],["colspan","5",1,"bg-info"],[1,"text-center","text-light","m-0"]],template:function(e,t){if(1&e&&(l.Hc(0,Ae,3,0,"ng-container",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"p",3),l.Jc(4,"Available Tokens: "),l.Ub(5,"span",4),l.Jc(6),l.jc(7,"number"),l.Tb(),l.Tb(),l.Ub(8,"p",5),l.Jc(9," Remaining Tokens:"),l.Ub(10,"span",6),l.Jc(11),l.jc(12,"number"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(13,"form",7),l.Ub(14,"table",8),l.Ub(15,"thead",9),l.Ub(16,"tr"),l.Ub(17,"th",10),l.Jc(18,"Assignment\xa0Name"),l.Tb(),l.Ub(19,"th",10),l.Jc(20,"Tokens\xa0Required"),l.Tb(),l.Ub(21,"th",10),l.Jc(22,"Extra\xa0Grade\xa0Given"),l.Tb(),l.Ub(23,"th",10),l.Jc(24,"Max\xa0Use"),l.Tb(),l.Ub(25,"th",10),l.Jc(26,"Actions"),l.Tb(),l.Tb(),l.Tb(),l.Ub(27,"tbody"),l.Hc(28,Ke,2,1,"ng-container",11),l.Hc(29,$e,4,0,"ng-template",null,12,l.Ic),l.Tb(),l.Tb(),l.Ub(31,"button",13),l.ec("click",function(){return t.confirmChanges()}),l.Jc(32,"Confirm Changes "),l.Tb(),l.Tb()),2&e){var n=l.wc(30);l.oc("ngIf",null==t.user?null:t.user.is_teacher),l.Bb(6),l.Kc(l.lc(7,10,t.courseReg.total_tokens_received,"1.0-1")),l.Bb(2),l.Gb("text-danger",t.invalid)("font-weight-bold",t.invalid),l.Bb(3),l.Kc(l.lc(12,13,t.remainingTokens,"1.0-1")),l.Bb(17),l.oc("ngIf",t.courseReg.token_uses)("ngIfElse",n),l.Bb(3),l.oc("disabled",t.invalid)}},directives:[c.o,H.A,H.p,H.q,c.n,Le.a,H.t,H.c,H.o,H.r],pipes:[c.f],styles:[".action-icon[_ngcontent-%COMP%]{line-height:1.25rem;display:inline-block;font-size:1.25rem;text-align:center;padding:.55rem;border-radius:5px}button[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{width:2rem;height:2rem}.token-input[_ngcontent-%COMP%]{width:5rem}"]}),Ge);function Ve(e,t){1&e&&(l.Ub(0,"th",7),l.Jc(1," Name"),l.Tb())}function Qe(e,t){if(1&e&&(l.Ub(0,"td",8),l.Jc(1),l.Tb()),2&e){var n=t.$implicit;l.Bb(1),l.Lc(" ",n.name||"Anonymous User"," ")}}function ze(e,t){1&e&&(l.Ub(0,"th",7),l.Jc(1," Token"),l.Tb())}function We(e,t){if(1&e&&(l.Ub(0,"td",8),l.Jc(1),l.Tb()),2&e){var n=t.$implicit;l.Bb(1),l.Lc(" ",n.token||"No Tokens"," ")}}function Xe(e,t){1&e&&l.Pb(0,"tr",9)}function Ze(e,t){1&e&&l.Pb(0,"tr",10)}var et,tt=((et=function(){function e(){n(this,e),this.displayedColumns=["name","token"],this.leaderBoard=[{name:"Anonymous User",token:null}]}return o(e,[{key:"ngOnInit",value:function(){this.leaderBoardData=new u.k}},{key:"ngAfterViewInit",value:function(){this.leaderBoardData=new u.k(this.leaderBoard),this.leaderBoardData.sort=this.matSort}}]),e}()).\u0275fac=function(e){return new(e||et)},et.\u0275cmp=l.Ib({type:et,selectors:[["app-leader-board"]],viewQuery:function(e,t){var n;1&e&&l.Nc(b.a,!0),2&e&&l.vc(n=l.fc())&&(t.matSort=n.first)},inputs:{leaderBoard:"leaderBoard"},decls:9,vars:3,consts:[["mat-table","","matSort","","matSortActive","token","matSortDirection","desc","matSortDisableClear","",1,"table","table-hover","hover-shadow",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","token"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l.Ub(0,"table",0),l.Sb(1,1),l.Hc(2,Ve,2,0,"th",2),l.Hc(3,Qe,2,1,"td",3),l.Rb(),l.Sb(4,4),l.Hc(5,ze,2,0,"th",2),l.Hc(6,We,2,1,"td",3),l.Rb(),l.Hc(7,Xe,1,0,"tr",5),l.Hc(8,Ze,1,0,"tr",6),l.Tb()),2&e&&(l.oc("dataSource",t.leaderBoardData),l.Bb(7),l.oc("matHeaderRowDef",t.displayedColumns),l.Bb(1),l.oc("matRowDefColumns",t.displayedColumns))},directives:[u.j,b.a,u.c,u.e,u.b,u.g,u.i,u.d,b.b,u.a,u.f,u.h],styles:[""]}),et);function nt(e,t){1&e&&(l.Sb(0),l.Ub(1,"li",5),l.Ub(2,"a",16),l.Jc(3,"Questions"),l.Tb(),l.Tb(),l.Rb())}function rt(e,t){if(1&e&&(l.Sb(0),l.Pb(1,"app-course-question-snippet",18),l.Rb()),2&e){var n=l.ic(2);l.Bb(1),l.oc("questions",null==n.course?null:n.course.question_set)("uqjs",null==n.course?null:n.course.uqjs)}}function ot(e,t){if(1&e&&(l.Sb(0),l.Ub(1,"div",17),l.Ub(2,"div",12),l.Hc(3,rt,2,2,"ng-container",4),l.Tb(),l.Tb(),l.Rb()),2&e){var n=l.ic();l.Bb(3),l.oc("ngIf",n.course)}}function it(e,t){if(1&e&&(l.Sb(0),l.Pb(1,"app-course-events-snippet",19),l.Rb()),2&e){var n=l.ic();l.Bb(1),l.oc("events",null==n.course?null:n.course.events)("courseId",n.courseId)}}function ct(e,t){if(1&e&&(l.Sb(0),l.Pb(1,"app-token-use-snippet",20),l.Rb()),2&e){var n=l.ic();l.Bb(1),l.oc("courseReg",null==n.course?null:n.course.course_reg)}}function at(e,t){if(1&e&&(l.Sb(0),l.Pb(1,"app-leader-board",21),l.Rb()),2&e){var n=l.ic();l.Bb(1),l.oc("leaderBoard",null==n.course?null:n.course.leader_board)}}function st(e,t){1&e&&l.Qb(0)}var bt,ut=((bt=function(){function e(t,r,o){var i=this;n(this,e),this.authenticationService=t,this.courseService=r,this.route=o,this.courseId=this.route.snapshot.params.courseId,this.authenticationService.currentUser.subscribe(function(e){return i.user=e})}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.courseService.getCourse(this.courseId).subscribe(function(t){e.course=t})}}]),e}()).\u0275fac=function(e){return new(e||bt)(l.Ob(d.a),l.Ob(m.a),l.Ob(s.a))},bt.\u0275cmp=l.Ib({type:bt,selectors:[["app-course"]],decls:59,vars:18,consts:[[1,"table","table-bordered","table-light","mt-5","hover-shadow"],[1,"thead-dark"],["scope","col"],["role","tablist",1,"nav","nav-tabs","mt-5"],[4,"ngIf"],["role","presentation",1,"nav-item"],["id","events-tab","data-toggle","tab","href","#events","role","tab","aria-controls","events","aria-selected","true",1,"nav-link","active"],["id","tokens-tab","data-toggle","tab","href","#tokens","role","tab","aria-controls","tokens","aria-selected","false",1,"nav-link"],["id","leader-board-tab","data-toggle","tab","href","#leader-board","role","tab","aria-controls","leader-board","aria-selected","false",1,"nav-link"],["id","concept-map-tab","data-toggle","tab","href","#concept-map","role","tab","aria-controls","concept-map","aria-selected","false",1,"nav-link"],["id","myTabContent",1,"tab-content"],["id","events","role","tabpanel","aria-labelledby","events-tab",1,"tab-pane","fade","show","active"],[1,"hover-shadow","p-3"],["id","tokens","role","tabpanel","aria-labelledby","tokens-tab",1,"tab-pane","fade"],["id","leader-board","role","tabpanel","aria-labelledby","leader-board-tab",1,"tab-pane","fade"],["id","concept-map","role","tabpanel","aria-labelledby","concept-map-tab",1,"tab-pane","fade"],["id","problem-set-tab","data-toggle","tab","href","#problem-set","role","tab","aria-controls","problem-set","aria-selected","true",1,"nav-link"],["id","problem-set","role","tabpanel","aria-labelledby","problem-set-tab",1,"tab-pane","fade"],[3,"questions","uqjs"],[3,"events","courseId"],[3,"courseReg"],[3,"leaderBoard"]],template:function(e,t){1&e&&(l.Ub(0,"table",0),l.Ub(1,"thead",1),l.Ub(2,"tr"),l.Ub(3,"th",2),l.Jc(4,"ID"),l.Tb(),l.Ub(5,"th",2),l.Jc(6,"Name"),l.Tb(),l.Ub(7,"th",2),l.Jc(8,"URL"),l.Tb(),l.Ub(9,"th",2),l.Jc(10,"Canvas\xa0Course\xa0Name"),l.Tb(),l.Ub(11,"th",2),l.Jc(12,"Start\xa0Date"),l.Tb(),l.Ub(13,"th",2),l.Jc(14,"End\xa0Date"),l.Tb(),l.Tb(),l.Tb(),l.Ub(15,"tbody"),l.Ub(16,"tr"),l.Ub(17,"td"),l.Jc(18),l.Tb(),l.Ub(19,"td"),l.Jc(20),l.Tb(),l.Ub(21,"td"),l.Jc(22),l.Tb(),l.Ub(23,"td"),l.Jc(24),l.Tb(),l.Ub(25,"td"),l.Jc(26),l.jc(27,"date"),l.Tb(),l.Ub(28,"td"),l.Jc(29),l.jc(30,"date"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(31,"ul",3),l.Hc(32,nt,4,0,"ng-container",4),l.Ub(33,"li",5),l.Ub(34,"a",6),l.Jc(35,"Events"),l.Tb(),l.Tb(),l.Ub(36,"li",5),l.Ub(37,"a",7),l.Jc(38,"Token Use"),l.Tb(),l.Tb(),l.Ub(39,"li",5),l.Ub(40,"a",8),l.Jc(41,"Leader\xa0Board"),l.Tb(),l.Tb(),l.Ub(42,"li",5),l.Ub(43,"a",9),l.Jc(44,"Concepts"),l.Tb(),l.Tb(),l.Tb(),l.Ub(45,"div",10),l.Hc(46,ot,4,1,"ng-container",4),l.Ub(47,"div",11),l.Ub(48,"div",12),l.Hc(49,it,2,2,"ng-container",4),l.Tb(),l.Tb(),l.Ub(50,"div",13),l.Ub(51,"div",12),l.Hc(52,ct,2,1,"ng-container",4),l.Tb(),l.Tb(),l.Ub(53,"div",14),l.Ub(54,"div",12),l.Hc(55,at,2,1,"ng-container",4),l.Tb(),l.Tb(),l.Ub(56,"div",15),l.Ub(57,"div",12),l.Hc(58,st,1,0,"ng-container",4),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Bb(18),l.Kc((null==t.course?null:t.course.id)||"No ID"),l.Bb(2),l.Kc((null==t.course?null:t.course.name)||"No Name"),l.Bb(2),l.Kc((null==t.course?null:t.course.url)||"No URL"),l.Bb(2),l.Kc((null==t.course?null:t.course.name)||"No Name"),l.Bb(2),l.Kc(l.lc(27,12,null==t.course?null:t.course.start_date,"LLL. dd, YYYY, hh:MM a")),l.Bb(3),l.Kc(l.lc(30,15,null==t.course?null:t.course.end_date,"LLL. dd, YYYY, hh:MM a")),l.Bb(3),l.oc("ngIf",null==t.user?null:t.user.is_teacher),l.Bb(14),l.oc("ngIf",null==t.user?null:t.user.is_teacher),l.Bb(3),l.oc("ngIf",t.course),l.Bb(3),l.oc("ngIf",t.course),l.Bb(3),l.oc("ngIf",t.course),l.Bb(3),l.oc("ngIf",t.course))},directives:[c.o,Te,He,Ye,tt],pipes:[c.e],styles:[".hover-shadow[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.445,.05,.55,.95)}.hover-shadow[_ngcontent-%COMP%]:hover{box-shadow:0 .65rem .65rem rgba(0,0,0,.08)}.tab-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#fff}"]}),bt),lt=i("n1FK"),dt=i("iadO");function mt(e,t){if(1&e&&(l.Sb(0),l.Ub(1,"option",21),l.Jc(2),l.Tb(),l.Rb()),2&e){var n=t.$implicit;l.Bb(1),l.oc("value",n[0]),l.Bb(1),l.Kc(n[1])}}var ft,pt,ht,vt=function(e){return["/course",e]},gt=function(e){var t=e.get("startPicker"),n=e.get("endPicker");return t.value>n.value?t.setErrors({forbiddenDateRange:{startDate:t.value,endDate:n.value}}):null},Tt=((ft=function(){function e(t,r,o,i,c){n(this,e),this.route=t,this.builder=r,this.courseEventService=o,this.toastr=i,this.router=c}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.formData=this.builder.group({name:new H.g("",[H.y.required]),type:new H.g("",[H.y.required]),countForTokens:new H.g("",[H.y.required]),startPicker:new H.g(new Date,[H.y.required]),endPicker:new H.g(new Date,[H.y.required])},{validator:gt}),this.courseEventService.getEventTypes().subscribe(function(t){return e.localEventTypes=t}),this.courseId=+this.route.snapshot.paramMap.get("courseId"),this.route.snapshot.paramMap.get("eventId")&&(this.eventId=+this.route.snapshot.paramMap.get("eventId"),this.courseEventService.getCourseEvent(this.eventId).subscribe(function(t){e.formData.patchValue({name:t.name,type:t.type,countForTokens:t.count_for_tokens,startPicker:new Date(t.start_date),endPicker:new Date(t.end_date)})}))}},{key:"formatFormData",value:function(e){return{id:e.get("eventId").value,name:e.get("evenName").value,type:e.get("eventType").value,count_for_tokens:e.get("countsForTokens").value,start_date:e.get("startTime").value,end_date:e.get("endTime").value,course:this.courseId}}},{key:"submitEvent",value:function(e){var t=this,n=this.formatFormData(e);this.eventId?this.courseEventService.updateCourseEvent(n).subscribe(function(){t.toastr.success("The Event has been updated Successfully."),window.scroll(0,0)},function(e){t.toastr.error(e),console.warn(e),window.scroll(0,0)}):this.courseEventService.addCourseEvent(n).subscribe(function(){t.router.navigate(["course/view",t.courseId]).then(),t.toastr.success("The Event has been added Successfully."),window.scroll(0,0)},function(e){t.toastr.error(e),console.warn(e),window.scroll(0,0)})}}]),e}()).\u0275fac=function(e){return new(e||ft)(l.Ob(s.a),l.Ob(H.f),l.Ob(ne.a),l.Ob(x.b),l.Ob(s.b))},ft.\u0275cmp=l.Ib({type:ft,selectors:[["app-course-event-create"]],decls:40,vars:18,consts:[["id","mainContainer",1,"container"],[1,"my-3"],["id","new-event",1,"form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","id-name"],["id","id-name","type","text","name","name","formControlName","name","placeholder","Event Name...",1,"form-control"],["for","id-type"],["id","id-type","name","type","formControlName","type",1,"form-control"],["value","","disabled","","selected",""],[4,"ngFor","ngForOf"],[1,"form-check","my-5"],["id","id-count-for-tokens","name","countForTokens","formControlName","countForTokens","type","checkbox",1,"form-check-input"],["for","id-count-for-tokens",1,"form-check-label"],["matInput","","placeholder","Choose a date","id","start-date-id","name","startPicker","formControlName","startPicker",3,"ngxMatDatetimePicker"],["matSuffix","",3,"for"],[3,"showSeconds","touchUi","stepHour","stepMinute"],["startPicker",""],["matInput","","placeholder","Choose a date","id","end-date-id","name","endPicker","formControlName","endPicker",3,"ngxMatDatetimePicker"],["endPicker",""],[1,"btn","btn-primary","my-2","mr-3",3,"routerLink"],["id","id-submit","type","submit","name","submit",1,"btn","btn-primary","my-2","mr-3",3,"disabled"],[3,"value"]],template:function(e,t){if(1&e&&(l.Ub(0,"div",0),l.Ub(1,"h2",1),l.Jc(2," Create Event "),l.Tb(),l.Ub(3,"form",2),l.ec("ngSubmit",function(){return t.submitEvent(t.formData)}),l.Ub(4,"div",3),l.Ub(5,"label",4),l.Jc(6,"Event Name"),l.Tb(),l.Pb(7,"input",5),l.Tb(),l.Ub(8,"div",3),l.Ub(9,"label",6),l.Jc(10,"Event type"),l.Tb(),l.Ub(11,"select",7),l.Ub(12,"option",8),l.Jc(13,"Select Event Type..."),l.Tb(),l.Hc(14,mt,3,2,"ng-container",9),l.Tb(),l.Tb(),l.Ub(15,"div",10),l.Pb(16,"input",11),l.Ub(17,"label",12),l.Jc(18,"Counts for tokens"),l.Tb(),l.Tb(),l.Ub(19,"div",3),l.Ub(20,"label",4),l.Jc(21,"Start Date & Time"),l.Tb(),l.Ub(22,"mat-form-field"),l.Pb(23,"input",13),l.Pb(24,"mat-datepicker-toggle",14),l.Pb(25,"ngx-mat-datetime-picker",15,16),l.Tb(),l.Tb(),l.Ub(27,"div",3),l.Ub(28,"label",4),l.Jc(29,"End Date & Time"),l.Tb(),l.Ub(30,"mat-form-field"),l.Pb(31,"input",17),l.Pb(32,"mat-datepicker-toggle",14),l.Pb(33,"ngx-mat-datetime-picker",15,18),l.Tb(),l.Tb(),l.Ub(35,"div",3),l.Ub(36,"button",19),l.Jc(37,"Back"),l.Tb(),l.Ub(38,"button",20),l.Jc(39,"Submit "),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e){var n=l.wc(26),r=l.wc(34);l.Bb(3),l.oc("formGroup",t.formData),l.Bb(11),l.oc("ngForOf",t.localEventTypes),l.Bb(9),l.oc("ngxMatDatetimePicker",n),l.Bb(1),l.oc("for",n),l.Bb(1),l.oc("showSeconds",!1)("touchUi",!0)("stepHour",1)("stepMinute",1),l.Bb(6),l.oc("ngxMatDatetimePicker",r),l.Bb(1),l.oc("for",r),l.Bb(1),l.oc("showSeconds",!1)("touchUi",!0)("stepHour",1)("stepMinute",1),l.Bb(3),l.oc("routerLink",l.sc(16,vt,t.courseId)),l.Bb(2),l.oc("disabled",t.formData.invalid)}},directives:[H.A,H.p,H.i,H.c,H.o,H.h,H.x,H.s,H.z,c.n,H.a,q.b,L.b,lt.a,dt.f,q.f,lt.b,s.c],styles:[".mat-form-field[_ngcontent-%COMP%]{display:block}"]}),ft),Ut=i("+mqk"),yt=[{path:"",component:R,canActivate:[a.a]},{path:":courseId",component:ut,canActivate:[a.a]},{path:":courseId/register",component:Z,canActivate:[a.a]},{path:":courseId/new-event",component:Tt,canActivate:[a.a]},{path:":courseId/new-event/:eventId",component:Tt,canActivate:[a.a]},{path:":courseId/event/:eventId",component:Te,canActivate:[a.a]},{path:":courseId/problem/:id",component:Ut.a,canActivate:[a.a]},{path:":courseId/event/:eventId/problem/:id",component:Ut.a,canActivate:[a.a]}],kt=((pt=function e(){n(this,e)}).\u0275mod=l.Mb({type:pt}),pt.\u0275inj=l.Lb({factory:function(e){return new(e||pt)},imports:[[s.e.forChild(yt)],s.e]}),pt),It=i("zioG"),St=i("M9IT"),Ct=i("QZHh"),wt=i("OtPg"),Bt=i("NFeN"),Jt=i("d3UM"),_t=((ht=function e(){n(this,e)}).\u0275mod=l.Mb({type:ht}),ht.\u0275inj=l.Lb({factory:function(e){return new(e||ht)},imports:[[c.c,kt,H.j,H.v,It.b,St.b,Bt.b,M.d,L.c,A.c,b.c,u.l,dt.e,lt.e,lt.c,lt.d,Jt.b,Le.b,Ct.b,wt.c]]}),ht)}}])}();